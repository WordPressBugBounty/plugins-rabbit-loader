"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[712],{37737:(e,t,r)=>{r.d(t,{Z:()=>c});var a=r(2784),n=r(32773),i=r(65992),o=r(47591),l=r(17277);const s=(0,i.ZP)(n.Z)((e=>{let{theme:t}=e;return{"& .apexcharts-canvas":{"& .apexcharts-tooltip":{...(0,l.Ls)({color:t.palette.background.default}),color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&.apexcharts-theme-light":{borderColor:"transparent",...(0,l.Ls)({color:t.palette.background.default})}},"& .apexcharts-xaxistooltip":{...(0,l.Ls)({color:t.palette.background.default}),borderColor:"transparent",color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&:before":{borderBottomColor:(0,o.Fq)(t.palette.grey[500],.24)},"&:after":{borderBottomColor:(0,o.Fq)(t.palette.background.default,.8)}},"& .apexcharts-tooltip-title":{textAlign:"center",fontWeight:t.typography.fontWeightBold,backgroundColor:(0,o.Fq)(t.palette.grey[500],.08),color:t.palette.text["light"===t.palette.mode?"secondary":"primary"]},"& .apexcharts-legend":{padding:0},"& .apexcharts-legend-series":{display:"inline-flex !important",alignItems:"center"},"& .apexcharts-legend-marker":{marginRight:8},"& .apexcharts-legend-text":{lineHeight:"18px",textTransform:"capitalize"}}}})),c=(0,a.memo)(s)},48449:(e,t,r)=>{r.d(t,{Z:()=>a.Z,Q:()=>c});var a=r(37737),n=r(98537),i=r.n(n),o=r(47746),l=r(47591),s=r(27149);function c(e){const t=(0,o.Z)(),r=function(e,t,r){const a=(0,o.Z)(),n=(0,s.Z)(a.breakpoints.up(t));(0,s.Z)(a.breakpoints.down(t)),(0,s.Z)(a.breakpoints.between(t,void 0)),(0,s.Z)(a.breakpoints.only(t));return n}(0,"sm"),a={show:!0,label:"Total",color:t.palette.text.secondary,fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight,lineHeight:t.typography.subtitle2.lineHeight},n={offsetY:8,color:t.palette.text.primary,fontSize:t.typography.h3.fontSize,fontWeight:t.typography.h3.fontWeight,lineHeight:t.typography.h3.lineHeight},c={colors:[t.palette.primary.main,t.palette.warning.main,t.palette.info.main,t.palette.error.main,t.palette.success.main,t.palette.warning.dark,t.palette.success.darker,t.palette.info.dark,t.palette.info.darker],chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:t.palette.text.disabled,fontFamily:t.typography.fontFamily},states:{hover:{filter:{type:"lighten",value:.04}},active:{filter:{type:"darken",value:.88}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:t.palette.divider,xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{},markers:{size:0,strokeColors:t.palette.background.paper},tooltip:{theme:!1,x:{show:!0}},legend:{show:!0,fontSize:13,position:"top",horizontalAlign:"right",markers:{radius:12},fontWeight:500,itemMargin:{horizontal:8},labels:{colors:t.palette.text.primary}},plotOptions:{bar:{borderRadius:r?3:1,columnWidth:"28%",borderRadiusApplication:"end",borderRadiusWhenStacked:"last"},pie:{donut:{labels:{show:!0,value:n,total:a}}},radialBar:{track:{strokeWidth:"100%",background:(0,l.Fq)(t.palette.grey[500],.16)},dataLabels:{value:n,total:a}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:t.palette.divider,connectorColors:t.palette.divider}},polarArea:{rings:{strokeColor:t.palette.divider},spokes:{connectorColors:t.palette.divider}}},responsive:[{breakpoint:t.breakpoints.values.sm,options:{plotOptions:{bar:{columnWidth:"40%"}}}},{breakpoint:t.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"32%"}}}}]};return i()(c,e)}},85991:(e,t,r)=>{r.d(t,{FK:()=>n});var a=r(60166);function n(e){const{code:t}=function(){const{currentLang:{numberFormat:{code:e,currency:t}}}=(0,a.n)();return{code:null!=e?e:"en-US",currency:null!=t?t:"USD"}}();if(!e)return"";const r=Number(e);return new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}},59739:(e,t,r)=>{r.r(t),r.d(t,{DoWarmup:()=>f});var a=r(13035);function n(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function i(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}let o;!function(e){var t=new WeakMap;class r extends a.Message{constructor(e){super(),n(this,t,{writable:!0,value:[]}),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(this,t)),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return a.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){a.Message.setField(this,1,e)}static fromObject(e){const t=new r({});return null!=e.targetUrl&&(t.targetUrl=e.targetUrl),t}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new a.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),n=new r;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?n.targetUrl=t.readString():t.skipField();return n}serializeBinary(){return this.serialize()}static deserializeBinary(e){return r.deserialize(e)}}e.WarmupRequest=r;var o=new WeakMap;class l extends a.Message{constructor(e){super(),n(this,o,{writable:!0,value:[]}),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(this,o)),Array.isArray(e)}static fromObject(e){return new l({})}toObject(){return{}}serialize(e){const t=e||new a.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),r=new l;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return l.deserialize(e)}}e.WarmupResponse=l;var s=new WeakMap;class c extends a.Message{constructor(e){super(),n(this,s,{writable:!0,value:[]}),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(this,s)),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return a.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){a.Message.setField(this,1,e)}static fromObject(e){const t=new c({});return null!=e.targetUrl&&(t.targetUrl=e.targetUrl),t}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new a.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),r=new c;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?r.targetUrl=t.readString():t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return c.deserialize(e)}}e.PurgeAllRequest=c;var u=new WeakMap;class d extends a.Message{constructor(e){super(),n(this,u,{writable:!0,value:[]}),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(this,u)),Array.isArray(e)}static fromObject(e){return new d({})}toObject(){return{}}serialize(e){const t=e||new a.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),r=new d;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return d.deserialize(e)}}e.PurgeAllResponse=d}(o||(o={}));const l=3e5,s=3,c=[500,502,503],u=!1;class d extends Error{constructor(e){super(e),this.name="MissingPathVarError"}}const p=new d("path variable is missing");const m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const{timeout:n=l,retryCount:i=s,retryableCodes:d=c,contentTypeJson:m=u}=t;let{newPath:g,missingVar:h}=function(e,t){let r=!1,a=e;for(const[e,r]of Object.entries(t))a=a.replace(e,r);return r=a.includes("{"),{newPath:a,missingVar:r}}(a+"/rlwarmupproxy/warmup",t.pathVars||{});if(h)return Promise.reject(p);const f=e.serializeBinary(),y={method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":m?"application/json":"application/x-protobuf",Accept:m?"application/json":"application/x-protobuf"},...t.cache?{cache:t.cache}:{}};return g=g+"?"+new URLSearchParams({get_params:btoa(String.fromCharCode.apply(null,Array.from(f)))}),async function e(t){try{const r=await fetch(g,y);if(!r.ok&&d.includes(r.status)&&0!==t)return e(t-1);if(m)try{return[await r.json(),r.status]}catch(e){return console.log("error in reading response body: ",e),[new o.WarmupResponse,r.status]}try{const e=await r.arrayBuffer(),t=new Uint8Array(e);return[o.WarmupResponse.deserialize(t),r.status]}catch(e){return console.error("error in reading response body",e),[new o.WarmupResponse,r.status]}}catch(e){return console.log("error getting data: ",e),[new o.WarmupResponse,0]}}(i)};var g=r(73454);const h=e=>(console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e);async function f(e){const t=h(e);if(new URL(t).host!==window.location.host){const e=new o.WarmupRequest;e.targetUrl=t;const[r,a]=await m(e,{},"",(0,g.dW)());return a}const r=new URL(t);return r.searchParams.append("rl-warmup","1"),r.searchParams.append("rl-rand",String(Math.floor((new Date).getTime()/1e3))),r.searchParams.append("rl-only-after",String(Math.floor((new Date).getTime()/1e3))),(await fetch(r,{credentials:"omit"})).status}},38712:(e,t,r)=>{r.d(t,{b:()=>Q});var a=r(2784),n=r(17029),i=r(88932),o=r(55312),l=r(8120),s=r(33952),c=r(38642),u=r(60189),d=r(48907),p=r(52691),m=r(35936),g=r(83415);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},h.apply(this,arguments)}const f=(0,a.forwardRef)((function(e,t){return a.createElement(g.Z,h({direction:"up",ref:t},e))}));function y(e){let{lighthouseJSONErrMessage:t}=e;const[r,n]=(0,a.useState)(!0),i=()=>{n(!1)};return a.createElement(a.Fragment,null,a.createElement(c.Z,{open:r,TransitionComponent:f,keepMounted:!0,onClose:i,"aria-describedby":"alert-dialog-slide-description"},a.createElement(m.Z,null,"Use Google's location service?"),a.createElement(d.Z,null,a.createElement(p.Z,{id:"alert-dialog-slide-description"},t)),a.createElement(u.Z,null,a.createElement(s.Z,{onClick:i},"Ok"))))}var w=r(48449),b=r(37737),v=r(47746);function x(e){let{value:t}=e;const r=(0,v.Z)(),n=()=>t>=90?[r.palette.success.light,r.palette.success.main]:t>=50?[r.palette.warning.light,r.palette.warning.main]:[r.palette.error.light,r.palette.error.main],i=(0,w.Q)({legend:{show:!1},fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:n()[0],opacity:1},{offset:100,color:n()[1],opacity:1}]}},plotOptions:{radialBar:{hollow:{size:"64%"},dataLabels:{name:{offsetY:-16},value:{offsetY:8},total:{label:"Score",formatter:()=>"".concat(t)}}}}});return a.createElement(b.Z,{dir:"ltr",type:"radialBar",series:[t],options:i,height:230})}var R=r(41740),E=r(79312),k=r(73868),S=r(30750);function U(e){let{progress:t}=e;return a.createElement(k.Z,{spacing:1},a.createElement(k.Z,{direction:"row",alignItems:"center"},a.createElement(E.Z,{variant:"subtitle2",sx:{flexGrow:1}},t.title),a.createElement(E.Z,{variant:"body2",sx:{color:"text.secondary"}}," (",function(e){if(!e)return"0%";const t=Number(e)/100;return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}).format(t)}(t.value),")")),a.createElement(S.Z,{variant:"determinate",value:t.value,color:(t.value<=30?"info":t.value<=60&&"warning")||"primary"}))}var z=r(85991);function F(e){if(!e)return"";if(!e.includes("-"))return e;const t=e.split("-").join(" ");return t.charAt(0).toUpperCase()+t.slice(1)}function Z(e){return e?parseFloat((0,z.FK)(100*e)):0}const W=e=>{var t,r,n;let{lighthouseJSON:i,title:o}=e;return i.error&&i.error.message?a.createElement(y,{lighthouseJSONErrMessage:i.error.message}):a.createElement(R.Z,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},a.createElement(R.Z,{sx:{width:"100%"}},a.createElement(E.Z,{variant:"h6",sx:{mb:2,textAlign:"center"}},o),a.createElement(R.Z,{sx:{display:"flex",flexDirection:"column",gap:2}},a.createElement(R.Z,null,a.createElement(x,{value:Z(null==i||null===(t=i.lighthouseResult)||void 0===t||null===(t=t.categories)||void 0===t||null===(t=t.performance)||void 0===t?void 0:t.score)})),Object.values(null!==(r=null==i||null===(n=i.lighthouseResult)||void 0===n?void 0:n.audits)&&void 0!==r?r:{}).sort(((e,t)=>e.title>t.title?1:-1)).map(((e,t)=>null===e.title||null===e.score?a.createElement(a.Fragment,{key:t}):a.createElement(R.Z,{key:t,style:{width:"100%"}},a.createElement("div",null,a.createElement(U,{progress:{title:F(e.title),value:Z(e.score)}}))))))))};var C=r(96242),B=r(33853),A=r(90838);const M=e=>{let{message:t}=e;const[r,n]=(0,a.useState)(!0);return a.createElement(R.Z,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},a.createElement(C.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:r},a.createElement(B.ZP,{container:!0,direction:"column",alignItems:"center",spacing:2},a.createElement(B.ZP,{item:!0},a.createElement(A.Z,{color:"inherit"})),a.createElement(B.ZP,{item:!0},a.createElement(E.Z,{style:{textColor:"white"},color:"white"},t)))))};var O=r(49850),L=r(1998),P=r(73454);const j={FirstContentFulPaint:"first-contentful-paint",TimeToInteractive:"interactive",SpeedIndex:"speed-index",TotalBlockingTime:"total-blocking-time",LargestContentFulPaint:"largest-contentful-paint",CumulativeLayoutShift:"cumulative-layout-shift",LargestContentFulPaintEle:"largest-contentful-paint-element"},D=async(e,t,r,a,n)=>{try{const i=((e,t,r)=>{if(null==e||null==e.audits)return void console.log("no lighthouseResult");const a=new O.Q.ScoreMetrics;var n;null!=e.categories&&null!=e.categories.performance&&(a.MainScore=null==e||null===(n=e.categories)||void 0===n||null===(n=n.performance)||void 0===n?void 0:n.score);const i=e.audits;for(const e in j)if(i[j[e]])if("LargestContentFulPaintEle"===e){const t=new O.Q.LCPE;var o,l;null!=i[j[e]]&&null!=i[j[e]].details&&null!=i[j[e]].details.items&&null!=i[j[e]].details.items[0]&&null!=i[j[e]].details.items[0].items&&null!=i[j[e]].details.items[0].items[0]&&null!=i[j[e]].details.items[0].items[0].node&&(t.Selector=null===(o=i[j[e]].details.items[0].items[0].node)||void 0===o?void 0:o.selector,t.Snippet=null===(l=i[j[e]].details.items[0].items[0].node)||void 0===l?void 0:l.snippet),a[e]=t}else{const t=new O.Q.Score;t.numericUnit=i[j[e]].numericUnit,t.numericValue=i[j[e]].setNumericvalue,t.scale=i[j[e]].score,a[e]=t}const s=new O.Q.ScoreStrategy;s.device=t||O.Q.ScoreDevice.Desktop,s.version=r;const c=new O.Q.SaveScoreRequest;return c.metrics=a,c.strategy=s,c})(e,a,n),o=((e,t)=>({pathVars:{"{domain_id}":e,"{url_id}":t}}))(t,r),l=(0,P.YT)(!1),s=(0,P.ZQ)(),[c,u]=await(0,L.sp)(i,o,l,s);200===u||console.error("Failed to save score. Status code:",u,"Error:",c)}catch(e){console.error("An error occurred while saving the score:",e)}};var T=r(56961),N=r(59739);const _=e=>{let{url:t,domain_id:r,url_id:n,device:i}=e;const[o,l]=(0,a.useState)("Warming up ...."),[s,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),p=async e=>{e.indexOf("wpunittest");const t=new URL("https://www.googleapis.com/pagespeedonline/v5/runPagespeed");t.searchParams.append("url",e),i&&(i===O.Q.ScoreDevice.Mobile?t.searchParams.append("strategy","mobile"):t.searchParams.append("strategy","desktop"));const r=await fetch(t);return await r.json()};return(0,a.useEffect)((()=>{if(!t)return;const e=function(e){return console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e}(t);l("Warming up ...."),(0,N.DoWarmup)(e).then((()=>{l("Analyzing with lighthouse ...."),p(e).then((e=>{c(e),e&&e.lighthouseResult&&D(null==e?void 0:e.lighthouseResult,r,n,i,O.Q.ScoreVersion.Optimized)}));const t=new URL(e);t.searchParams.append("norl","1"),p(t.toString()).then((e=>{d(e),e&&e.lighthouseResult&&D(null==e?void 0:e.lighthouseResult,r,n,i,O.Q.ScoreVersion.Original)}))}))}),[t]),React.createElement(React.Fragment,null,u&&s?React.createElement(React.Fragment,null,React.createElement(R.Z,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},React.createElement(W,{lighthouseJSON:u,title:"Without RabbitLoader"}),React.createElement(T.Z,{orientation:"vertical",flexItem:!0}),React.createElement(W,{lighthouseJSON:s,title:"With RabbitLoader"}))):React.createElement(React.Fragment,null,React.createElement(M,{message:o})))},I=function(e){let{url:t,domain_id:r,url_id:a,device:n}=e;return React.createElement(l.mu,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},React.createElement(o.Z,null,React.createElement(E.Z,{sx:{mt:-1,mb:2,color:"black"}},t),React.createElement("div",{className:"App",style:{display:"contents",width:"100%"}},React.createElement(_,{url:t,domain_id:r,url_id:a,device:n}),React.createElement(i.Ix,null))))},Q=e=>{let{id:t,url:r,domain_id:i,url_id:o,device:l}=e;if("local-testing-root"!==t)return a.createElement(I,{url:r,domain_id:i,url_id:o,device:l});n.createRoot(document.getElementById(t)).render(a.createElement(a.StrictMode,null,a.createElement(I,{url:r,domain_id:i,url_id:o,device:l})))}}}]);