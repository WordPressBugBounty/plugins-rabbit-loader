"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[799],{11799:(e,t,r)=>{r.r(t),r.d(t,{ActivityHistory:()=>Z});var i=r(14041),n=r(25873),s=r(31717),a=r(83818),o=r(19996),l=r(70780),c=r(85992),u=r(65990),f=r(77533),d=r(12302),h=r(43060),m=r(97561),p=r(11261),g=r(25484),y=r(65249),b=r(3004),w=r(93786),E=r(92060),v=r(50472);const O=["title","subheader","loading","list"],j=["node"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},L.apply(null,arguments)}function A(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function M(e){let{title:t,subheader:r,loading:n,list:s}=e,a=A(e,O);return i.createElement(d.A,a,i.createElement(f.A,{title:t,subheader:r}),n?i.createElement(b.x,{sx:{p:3}}):i.createElement(l.A,{sx:{m:0,p:3,["& .".concat(g.A.root,":before")]:{flex:0,padding:0}}},s?s.map(((e,t)=>i.createElement(R,{key:e.id,item:e,lastTimeline:t===s.length-1}))):i.createElement(u.A,null,"No data found")))}const F=new E.A;function R(e){let{item:t,lastTimeline:r}=e;const{type:n,title:s,time:a}=t;let o="";return o=s.includes("<")?F.turndown("<h6>".concat(s,"</h6>")):"###### "+s,i.createElement(y.A,{sx:{"&:before":{flex:0}}},i.createElement(m.A,null,i.createElement(c.A,{color:("order1"===n?"primary":"order2"===n&&"success")||"I"===n&&"info"||"W"===n&&"warning"||"error"}),r?null:i.createElement(p.A,null)),i.createElement(h.A,null,i.createElement(u.A,{variant:"subtitle2"},i.createElement(v.o,{components:{a(e){const{node:t}=e,r=A(e,j);return i.createElement("a",L({target:"_blank"},r))}}},o)),i.createElement(u.A,{variant:"caption",sx:{color:"text.disabled"}},(l=a)?(0,w.A)(new Date(l),"dd MMM yyyy p"):"")));var l}var P=r(5319),z=r(82303),D=r(67186);function I(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function _(e,t){return e.get(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,t))}let x;function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function N(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){let t=function(e){return e[e.LEVEL_UNDEFINED=0]="LEVEL_UNDEFINED",e[e.LEVEL_INFO=1]="LEVEL_INFO",e[e.LEVEL_WARNING=2]="LEVEL_WARNING",e[e.LEVEL_ERROR=3]="LEVEL_ERROR",e}({});e.Level=t;var r=new WeakMap;class i extends D.Message{constructor(e){super(),I(this,r,[]),D.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],_(r,this)),Array.isArray(e)||"object"!=typeof e||("description"in e&&null!=e.description&&(this.description=e.description),"level"in e&&null!=e.level&&(this.level=e.level),"time"in e&&null!=e.time&&(this.time=e.time))}get description(){return D.Message.getFieldWithDefault(this,1,"")}set description(e){D.Message.setField(this,1,e)}get level(){return D.Message.getFieldWithDefault(this,2,t.LEVEL_UNDEFINED)}set level(e){D.Message.setField(this,2,e)}get time(){return D.Message.getWrapperField(this,z.q.protobuf.Timestamp,3)}set time(e){D.Message.setWrapperField(this,3,e)}get has_time(){return null!=D.Message.getField(this,3)}static fromObject(e){const t=new i({});return null!=e.description&&(t.description=e.description),null!=e.level&&(t.level=e.level),null!=e.time&&(t.time=z.q.protobuf.Timestamp.fromObject(e.time)),t}toObject(){const e={};return null!=this.description&&(e.description=this.description),null!=this.level&&(e.level=this.level),null!=this.time&&(e.time=this.time.toObject()),e}serialize(e){const r=e||new D.BinaryWriter;if(this.description.length&&r.writeString(1,this.description),this.level!=t.LEVEL_UNDEFINED&&r.writeEnum(2,this.level),this.has_time&&r.writeMessage(3,this.time,(()=>this.time.serialize(r))),!e)return r.getResultBuffer()}static deserialize(e){const t=e instanceof D.BinaryReader?e:new D.BinaryReader(e),r=new i;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.description=t.readString();break;case 2:r.level=t.readEnum();break;case 3:t.readMessage(r.time,(()=>r.time=z.q.protobuf.Timestamp.deserialize(t)));break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return i.deserialize(e)}}e.GetLogItem=i;var n=new WeakMap;class s extends D.Message{constructor(e){super(),I(this,n,[]),D.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[3],_(n,this)),Array.isArray(e)||"object"!=typeof e||("limit"in e&&null!=e.limit&&(this.limit=e.limit),"offset"in e&&null!=e.offset&&(this.offset=e.offset),"search_tags"in e&&null!=e.search_tags&&(this.search_tags=e.search_tags))}get limit(){return D.Message.getFieldWithDefault(this,1,0)}set limit(e){D.Message.setField(this,1,e)}get offset(){return D.Message.getFieldWithDefault(this,2,0)}set offset(e){D.Message.setField(this,2,e)}get search_tags(){return D.Message.getFieldWithDefault(this,3,[])}set search_tags(e){D.Message.setField(this,3,e)}static fromObject(e){const t=new s({});return null!=e.limit&&(t.limit=e.limit),null!=e.offset&&(t.offset=e.offset),null!=e.search_tags&&(t.search_tags=e.search_tags),t}toObject(){const e={};return null!=this.limit&&(e.limit=this.limit),null!=this.offset&&(e.offset=this.offset),null!=this.search_tags&&(e.search_tags=this.search_tags),e}serialize(e){const t=e||new D.BinaryWriter;if(0!=this.limit&&t.writeInt64(1,this.limit),0!=this.offset&&t.writeInt32(2,this.offset),this.search_tags.length&&t.writeRepeatedString(3,this.search_tags),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof D.BinaryReader?e:new D.BinaryReader(e),r=new s;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:r.limit=t.readInt64();break;case 2:r.offset=t.readInt32();break;case 3:D.Message.addToRepeatedField(r,3,t.readString());break;default:t.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return s.deserialize(e)}}e.GetLogReq=s;var a=new WeakMap;class o extends D.Message{constructor(e){super(),I(this,a,[]),D.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1],_(a,this)),Array.isArray(e)||"object"!=typeof e||"items"in e&&null!=e.items&&(this.items=e.items)}get items(){return D.Message.getRepeatedWrapperField(this,i,1)}set items(e){D.Message.setRepeatedWrapperField(this,1,e)}static fromObject(e){const t=new o({});return null!=e.items&&(t.items=e.items.map((e=>i.fromObject(e)))),t}toObject(){const e={};return null!=this.items&&(e.items=this.items.map((e=>e.toObject()))),e}serialize(e){const t=e||new D.BinaryWriter;if(this.items.length&&t.writeRepeatedMessage(1,this.items,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof D.BinaryReader?e:new D.BinaryReader(e),r=new o;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?t.readMessage(r.items,(()=>D.Message.addToRepeatedWrapperField(r,1,i.deserialize(t),i))):t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return o.deserialize(e)}}e.GetLogRes=o}(x||(x={}));const W=3e5,k=3,S=[500,502,503],V=!1;class G extends Error{constructor(e){super(e),this.name="MissingPathVarError"}}const T=new G("path variable is missing");const C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const{timeout:n=W,retryCount:s=k,retryableCodes:a=S,contentTypeJson:o=V}=t;let{newPath:l,missingVar:c}=function(e,t){let r=!1,i=e;for(const[e,r]of Object.entries(t))i=i.replace(e,r);return r=i.includes("{"),{newPath:i,missingVar:r}}(i+"/activitylog/log/domain/{domain_id}/",t.pathVars||{});if(c)return Promise.reject(T);const u=e.serializeBinary(),f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":o?"application/json":"application/x-protobuf",Accept:o?"application/json":"application/x-protobuf"}},t.cache?{cache:t.cache}:{});return l=l+"?"+new URLSearchParams({get_params:btoa(String.fromCharCode.apply(null,Array.from(u)))}),async function e(t){try{const r=await fetch(l,f);if(!r.ok&&a.includes(r.status)&&0!==t)return e(t-1);if(o)try{return[await r.json(),r.status]}catch(e){return console.log("error in reading response body: ",e),[new x.GetLogRes,r.status]}try{const e=await r.arrayBuffer(),t=new Uint8Array(e);return[x.GetLogRes.deserialize(t),r.status]}catch(e){return console.error("error in reading response body",e),[new x.GetLogRes,r.status]}}catch(e){return console.log("error getting data: ",e),[new x.GetLogRes,0]}}(s)},U=e=>({pathVars:{"{domain_id}":e}}),q={[x.Level.LEVEL_UNDEFINED]:"",[x.Level.LEVEL_INFO]:"I",[x.Level.LEVEL_WARNING]:"W",[x.Level.LEVEL_ERROR]:"E"};function H(e){let{domainID:t}=e;const[r,n]=i.useState(!1),[s,a]=i.useState();return i.useEffect((()=>{!async function(){n(!0);try{const e=await async function(e){let{domainID:t}=e;const r=(0,P.N4)(),i=(0,P.w9)(!1),n=U(t),s=new x.GetLogReq({limit:50,offset:0,search_tags:[]}),[a,o]=await C(s,n,i,r);if(200!==o)return{logs:null,error:"Some thing went wrong."};const l=await a.toObject();if(!l||!l.items)return{logs:null,error:"Some thing went wrong."};const c=[];return l.items.map((e=>{c.push({id:"",title:e.description,time:new Date(1e3*e.time.seconds),type:q[e.level]})})),{logs:c,error:null}}({domainID:t});if(e.error)return;a(e)}catch(e){console.error(e),a({error:"failed to get notifications",logs:null})}finally{n(!1)}}()}),[t]),i.createElement(o.Ay,{xs:12,md:6,lg:4},i.createElement(M,{title:"Recent Notifications",subheader:null==s?void 0:s.error,loading:r,list:null==s?void 0:s.logs}))}function J(e){let{domainID:t}=e;return i.createElement(i.Fragment,null,i.createElement(a.Z6,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},i.createElement(s.A,null,i.createElement(H,{domainID:t}))))}function Z(e){let{domID:t,domainID:r}=e;if("local-testing-root"!==t)return i.createElement(J,{domainID:r});n.createRoot(document.getElementById(t)).render(i.createElement(i.StrictMode,null,i.createElement(J,{domainID:r})))}},3004:(e,t,r)=>{r.d(t,{x:()=>f});var i=r(14041),n=r(22051),s=r(83761);const a=["sx"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},o.apply(null,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){let{sx:t}=e,r=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,a);return i.createElement(n.A,o({sx:c({px:5,width:1,flexGrow:1,minHeight:1,display:"flex",alignItems:"center",justifyContent:"center"},t)},r),i.createElement(s.A,{color:"inherit",sx:{width:1,maxWidth:360}}))}},82303:(e,t,r)=>{r.d(t,{q:()=>n});var i=r(67186);let n;!function(e){let t;!function(e){var t=new WeakMap;class r extends i.Message{constructor(e){var r,n,s;super(),s=[],function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=t),n.set(r,s),i.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],function(e,t){return e.get(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,t))}(t,this)),Array.isArray(e)||"object"!=typeof e||("seconds"in e&&null!=e.seconds&&(this.seconds=e.seconds),"nanos"in e&&null!=e.nanos&&(this.nanos=e.nanos))}get seconds(){return i.Message.getFieldWithDefault(this,1,0)}set seconds(e){i.Message.setField(this,1,e)}get nanos(){return i.Message.getFieldWithDefault(this,2,0)}set nanos(e){i.Message.setField(this,2,e)}static fromObject(e){const t=new r({});return null!=e.seconds&&(t.seconds=e.seconds),null!=e.nanos&&(t.nanos=e.nanos),t}toObject(){const e={};return null!=this.seconds&&(e.seconds=this.seconds),null!=this.nanos&&(e.nanos=this.nanos),e}serialize(e){const t=e||new i.BinaryWriter;if(0!=this.seconds&&t.writeInt64(1,this.seconds),0!=this.nanos&&t.writeInt32(2,this.nanos),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof i.BinaryReader?e:new i.BinaryReader(e),n=new r;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:n.seconds=t.readInt64();break;case 2:n.nanos=t.readInt32();break;default:t.skipField()}return n}serializeBinary(){return this.serialize()}static deserializeBinary(e){return r.deserialize(e)}}e.Timestamp=r}(t||(t=e.protobuf||(e.protobuf={})))}(n||(n={}))}}]);