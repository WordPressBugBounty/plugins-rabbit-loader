"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[564],{1659:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(14041),o=a(54357),l=a(90028),r=a(59193),s=a(71470),i=a(49556),c=a(86310),u=a(18526);function p(e){return(0,u.Ay)("MuiToolbar",e)}(0,c.A)("MuiToolbar",["root","gutters","regular","dense"]);var d=a(31085);const m=(0,r.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableGutters&&t.gutters,t[a.variant]]}})((0,s.A)((({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]})))),h=n.forwardRef((function(e,t){const a=(0,i.b)({props:e,name:"MuiToolbar"}),{className:n,component:r="div",disableGutters:s=!1,variant:c="regular",...u}=a,h={...a,component:r,disableGutters:s,variant:c},g=(e=>{const{classes:t,disableGutters:a,variant:n}=e,o={root:["root",!a&&"gutters",n]};return(0,l.A)(o,p,t)})(h);return(0,d.jsx)(m,{as:r,className:(0,o.A)(g.root,n),ref:t,ownerState:h,...u})}))},19909:(e,t,a)=>{e.exports=a.p+"e503aec708eb2a9768c7.svg"},79564:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var n=a(6530),o=a(47086),l=a(65990),r=a(22771),s=a(12302),i=a(89301),c=a(24525),u=a(81550),p=a(61580),d=a(18088),m=a(55106),h=a(983),g=a(16481),A=a(78722),R=a(14041),b=a(54357),v=a(90028),x=a(59193),w=a(71470),f=a(49556),y=a(24300),P=a(37296),E=a(17515),I=a(1659),B=a(26117),L=a(46406),S=a(26993),M=a(77776),j=a(31085);const k=(0,M.A)((0,j.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),D=(0,M.A)((0,j.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),C=R.forwardRef((function(e,t){const{backIconButtonProps:a,count:n,disabled:o=!1,getItemAriaLabel:l,nextIconButtonProps:r,onPageChange:s,page:i,rowsPerPage:c,showFirstButton:u,showLastButton:p,slots:d={},slotProps:m={},...h}=e,g=(0,B.I)(),R=d.firstButton??A.A,b=d.lastButton??A.A,v=d.nextButton??A.A,x=d.previousButton??A.A,w=d.firstButtonIcon??D,f=d.lastButtonIcon??k,y=d.nextButtonIcon??S.A,P=d.previousButtonIcon??L.A,E=g?b:R,I=g?v:x,M=g?x:v,C=g?R:b,T=g?m.lastButton:m.firstButton,z=g?m.nextButton:m.previousButton,F=g?m.previousButton:m.nextButton,N=g?m.firstButton:m.lastButton;return(0,j.jsxs)("div",{ref:t,...h,children:[u&&(0,j.jsx)(E,{onClick:e=>{s(e,0)},disabled:o||0===i,"aria-label":l("first",i),title:l("first",i),...T,children:g?(0,j.jsx)(f,{...m.lastButtonIcon}):(0,j.jsx)(w,{...m.firstButtonIcon})}),(0,j.jsx)(I,{onClick:e=>{s(e,i-1)},disabled:o||0===i,color:"inherit","aria-label":l("previous",i),title:l("previous",i),...z??a,children:g?(0,j.jsx)(y,{...m.nextButtonIcon}):(0,j.jsx)(P,{...m.previousButtonIcon})}),(0,j.jsx)(M,{onClick:e=>{s(e,i+1)},disabled:o||-1!==n&&i>=Math.ceil(n/c)-1,color:"inherit","aria-label":l("next",i),title:l("next",i),...F??r,children:g?(0,j.jsx)(P,{...m.previousButtonIcon}):(0,j.jsx)(y,{...m.nextButtonIcon})}),p&&(0,j.jsx)(C,{onClick:e=>{s(e,Math.max(0,Math.ceil(n/c)-1))},disabled:o||i>=Math.ceil(n/c)-1,"aria-label":l("last",i),title:l("last",i),...N,children:g?(0,j.jsx)(w,{...m.firstButtonIcon}):(0,j.jsx)(f,{...m.lastButtonIcon})})]})}));var T=a(81141),z=a(86310),F=a(18526);function N(e){return(0,F.Ay)("MuiTablePagination",e)}const $=(0,z.A)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var H,U=a(85800);const G=(0,x.Ay)(m.A,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})((0,w.A)((({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})))),O=(0,x.Ay)(I.A,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${$.actions}`]:t.actions,...t.toolbar})})((0,w.A)((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${$.actions}`]:{flexShrink:0,marginLeft:20}})))),q=(0,x.Ay)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),V=(0,x.Ay)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})((0,w.A)((({theme:e})=>({...e.typography.body2,flexShrink:0})))),_=(0,x.Ay)(E.A,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${$.selectIcon}`]:t.selectIcon,[`& .${$.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${$.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Y=(0,x.Ay)(P.A,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),W=(0,x.Ay)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})((0,w.A)((({theme:e})=>({...e.typography.body2,flexShrink:0}))));function J({from:e,to:t,count:a}){return`${e}â€“${t} of ${-1!==a?a:`more than ${t}`}`}function K(e){return`Go to ${e} page`}const Q=R.forwardRef((function(e,t){const a=(0,f.b)({props:e,name:"MuiTablePagination"}),{ActionsComponent:n=C,backIconButtonProps:o,colSpan:l,component:r=m.A,count:s,disabled:i=!1,getItemAriaLabel:c=K,labelDisplayedRows:u=J,labelRowsPerPage:p="Rows per page:",nextIconButtonProps:d,onPageChange:h,onRowsPerPageChange:g,page:A,rowsPerPage:x,rowsPerPageOptions:w=[10,25,50,100],SelectProps:P={},showFirstButton:E=!1,showLastButton:I=!1,slotProps:B={},slots:L={},...S}=a,M=a,k=(e=>{const{classes:t}=e;return(0,v.A)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},N,t)})(M),D=B?.select??P,z=D.native?"option":Y;let F;r!==m.A&&"td"!==r||(F=l||1e3);const $=(0,T.A)(D.id),Q=(0,T.A)(D.labelId),X={slots:L,slotProps:B},[Z,ee]=(0,U.A)("root",{ref:t,className:k.root,elementType:G,externalForwardedProps:{...X,component:r,...S},ownerState:M,additionalProps:{colSpan:F}}),[te,ae]=(0,U.A)("toolbar",{className:k.toolbar,elementType:O,externalForwardedProps:X,ownerState:M}),[ne,oe]=(0,U.A)("spacer",{className:k.spacer,elementType:q,externalForwardedProps:X,ownerState:M}),[le,re]=(0,U.A)("selectLabel",{className:k.selectLabel,elementType:V,externalForwardedProps:X,ownerState:M,additionalProps:{id:Q}}),[se,ie]=(0,U.A)("select",{className:k.select,elementType:_,externalForwardedProps:X,ownerState:M}),[ce,ue]=(0,U.A)("menuItem",{className:k.menuItem,elementType:z,externalForwardedProps:X,ownerState:M}),[pe,de]=(0,U.A)("displayedRows",{className:k.displayedRows,elementType:W,externalForwardedProps:X,ownerState:M});return(0,j.jsx)(Z,{...ee,children:(0,j.jsxs)(te,{...ae,children:[(0,j.jsx)(ne,{...oe}),w.length>1&&(0,j.jsx)(le,{...re,children:p}),w.length>1&&(0,j.jsx)(se,{variant:"standard",...!D.variant&&{input:H||(H=(0,j.jsx)(y.Ay,{}))},value:x,onChange:g,id:$,labelId:Q,...D,classes:{...D.classes,root:(0,b.A)(k.input,k.selectRoot,(D.classes||{}).root),select:(0,b.A)(k.select,(D.classes||{}).select),icon:(0,b.A)(k.selectIcon,(D.classes||{}).icon)},disabled:i,...ie,children:w.map((e=>(0,R.createElement)(ce,{...ue,key:e.label?e.label:e,value:e.value?e.value:e},e.label?e.label:e)))}),(0,j.jsx)(pe,{...de,children:u({from:0===s?0:A*x+1,to:-1===s?(A+1)*x:-1===x?s:Math.min(s,(A+1)*x),count:-1===s?-1:s,page:A})}),(0,j.jsx)(n,{className:k.actions,backIconButtonProps:o,count:s,nextIconButtonProps:d,onPageChange:h,page:A,rowsPerPage:x,showFirstButton:E,showLastButton:I,slotProps:B.actions,slots:L.actions,getItemAriaLabel:c,disabled:i})]})})}));var X=a(98268);const Z=(0,M.A)((0,j.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var ee=a(95374),te=a(5319),ae=a(96809),ne=a(8836);const oe=(0,M.A)((0,j.jsx)("path",{d:"M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9zm6.82 6L12 12.72 5.18 9 12 5.28zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73z"}),"SchoolOutlined"),le=(0,M.A)((0,j.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),re=(0,M.A)((0,j.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2zM9 9h6c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1H9c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1m6.5-5-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"}),"DeleteOutlineRounded"),se=(0,M.A)((0,j.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp"),ie=(0,M.A)((0,j.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var ce=a(19909),ue=a(42173),pe=a(28804),de=function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e}(de||{});function me(e){let{domainID:t,pageRules:a,isLoading:b,defaultPageRule:v}=e;const x=(0,n.A)(),[w,f]=(0,R.useState)(5),[y,P]=(0,R.useState)(0),[E,I]=(0,R.useState)(void 0);async function B(e,n){if(!a)return;I(e);const o=[...a];if(n===de.Up){if(e<=0||e>=a.length)return void I(void 0);[o[e],o[e-1]]=[o[e-1],o[e]]}else if(n===de.Down){if(e<0||e>=a.length-1)return void I(void 0);[o[e],o[e+1]]=[o[e+1],o[e]]}const l=[];o.forEach((e=>{l.push(e.pageRuleID)})),v&&l.push(v.pageRuleID);const r=await async function(e,t){const a=new ne.I.UpdatePageRulesPriorityRequest({pageRuleIDs:t});return await(0,ae.cs)(a,{pathVars:{"{domain_id}":e}},(0,te.w9)(!1),(0,te.N4)())}(t,l);200===r&&(ee.b.emit(ee.B.PriorityChanged,[...o]),(0,pe.ck)("adv_rule_priority_changed")),I(void 0)}return React.createElement(r.A,{sx:{mt:5,mb:3}},React.createElement(s.A,{sx:{py:3}},React.createElement(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement(r.A,{sx:{ml:4,maxWidth:"70%"}},React.createElement(l.A,{variant:"h5",color:"textPrimary"},"Override Global Settings"),React.createElement(l.A,{variant:"body2",sx:{mb:2},color:"textSecondary"},"You can create rules to best optimize the various pages served from your domain. RabbitLoader compares every page and assets served with the path patterns in your rules to optimize the performance. Arrange rules in the order in which you want RabbitLoader to evaluate them.")),React.createElement(r.A,{sx:{mr:4,mb:4,display:"flex",columnGap:3}},React.createElement(i.A,{variant:"contained",onClick:()=>ee.b.emit(ee.B.AddOrUpdatePageRuleAction),color:"primary"},React.createElement(Z,null)," Add Rule"),React.createElement(i.A,{variant:"outlined",href:"https://rabbitloader.com/kb/setting-page-rules/",target:"__blank"},React.createElement(oe,{sx:{mr:1}})," Rule Help"))),React.createElement(c.A,null,React.createElement(u.A,null,React.createElement(p.A,null,React.createElement(d.A,{sx:{pl:3}},React.createElement(m.A,{colSpan:8},"Sequence"," ",React.createElement(o.A,{title:"Rules are compared in ascending order of their matching sequence until a match is found. So a rule with sequence 0 will be compared first when a URL is optimized. If the rule matches, no further rules with higher sequence number will be evaluated for the URL. Following the same convention, the * rule should come at the last and it should have the highest sequence."},React.createElement(X.A,null))),React.createElement(m.A,{colSpan:8},"URL Pattern"),React.createElement(m.A,{colSpan:8},"Cache"),React.createElement(m.A,null,"Actions"))),React.createElement(h.A,null,b&&void 0===a?React.createElement(d.A,null,React.createElement(m.A,{colSpan:25,align:"center",sx:{height:200}},React.createElement(g.A,null))):React.createElement(React.Fragment,null,0===a?.length&&React.createElement(d.A,null,React.createElement(m.A,{colSpan:25,height:300,align:"center"},React.createElement("img",{src:ce,alt:"No Data Found",style:{width:160}}),React.createElement(l.A,{variant:"body1"},"No page rule has been set yet."))),a?.slice(y*w,y*w+w).map(((e,a)=>React.createElement(d.A,{key:`${e.pageRuleID}`,sx:{pl:3,opacity:E===a?"60%":"100%"}},React.createElement(m.A,{colSpan:8},a+1),React.createElement(m.A,{colSpan:8},React.createElement(o.A,{title:"The rule will apply to all pages matching this pattern"},React.createElement(l.A,null,e.pathPattern))),React.createElement(m.A,{colSpan:8},(e=>{const t=e===ne.I.ContentNature.FullDynamic?"Disabled":"Enabled",a=`Cache is ${t} for pages matching this rule`;return React.createElement(o.A,{title:a},React.createElement(l.A,null,t))})(e.contentNature)),React.createElement(m.A,null,React.createElement(o.A,{title:"Modify optimization settings"},React.createElement(A.A,{onClick:()=>ee.b.emit(ee.B.AddOrUpdatePageRuleAction,e)},React.createElement(le,{sx:{color:x.palette.primary.main}}))),React.createElement(o.A,{title:"Delete rule"},React.createElement(A.A,{"aria-label":"delete",onClick:async()=>{I(a);const n=await async function(e){let{pageRuleID:t,domainID:a}=e;const n=new ne.I.DeletePageRuleRequest({pageRuleID:t});return await(0,ae.jY)(n,{pathVars:{"{domain_id}":a}},(0,te.w9)(!1),(0,te.N4)())}({domainID:t,pageRuleID:e.pageRuleID});200===n?((0,ue.M8)({variant:"success",message:"Successfully deleted page rule"}),ee.b.emit(ee.B.RulesChanged)):(0,ue.M8)({variant:"warning",message:"Failed to delete page rule"}),I(void 0)}},React.createElement(re,{style:{color:x.palette.error.main}}))),React.createElement(o.A,{title:"Move up for earlier evaluation"},React.createElement(A.A,{onClick:()=>B(a,de.Up)},React.createElement(se,null))),React.createElement(o.A,{title:"Move down for later evaluation"},React.createElement(A.A,{onClick:()=>B(a,de.Down)},React.createElement(ie,null))))))))))),React.createElement(Q,{page:y,rowsPerPage:w,component:"div",count:a?.length??0,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:e=>f(e.target.value),onPageChange:(e,t)=>P(t)})))}}}]);