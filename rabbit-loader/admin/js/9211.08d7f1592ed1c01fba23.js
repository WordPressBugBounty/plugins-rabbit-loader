"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[9211],{3004:(e,t,s)=>{s.d(t,{x:()=>l});var i=s(14041),r=s(22051),n=s(83761);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)({}).hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},a.apply(null,arguments)}function l(e){let{sx:t,...s}=e;return i.createElement(r.A,a({sx:{px:5,width:1,flexGrow:1,minHeight:1,display:"flex",alignItems:"center",justifyContent:"center",...t}},s),i.createElement(n.A,{color:"inherit",sx:{width:1,maxWidth:360}}))}},39211:(e,t,s)=>{s.r(t),s.d(t,{ActivityHistory:()=>T});var i=s(14041),r=s(25873),n=s(15156),a=s(83818),l=s(12302),o=s(77533),c=s(19996),u=s(70780),d=s(85992),h=s(65990),m=s(43060),f=s(97561),g=s(11261),p=s(25484),E=s(65249),y=s(3004),R=s(93786),w=s(92060),b=s(50472),_=s(22771);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)({}).hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},L.apply(null,arguments)}function A(e){let{loading:t,list:s,error:i}=e;return i?React.createElement(_.A,{sx:{display:"flex",justifyContent:"center"}},React.createElement(h.A,{variant:"h6",color:"textSecondary"},i)):React.createElement(React.Fragment,null,t?React.createElement(y.x,{sx:{p:3}}):React.createElement(u.A,{sx:{m:0,p:3,[`& .${p.A.root}:before`]:{flex:0,padding:0}}},s?s.map(((e,t)=>React.createElement(v,{key:e.id,item:e,lastTimeline:t===s.length-1}))):React.createElement(h.A,null,"No data found")))}const F=new w.A;function v(e){let{item:t,lastTimeline:s}=e;const{type:i,title:r,time:n}=t;let a="";return a=r.includes("<")?F.turndown(`<h6>${r}</h6>`):"###### "+r,React.createElement(E.A,{sx:{"&:before":{flex:0}}},React.createElement(f.A,null,React.createElement(d.A,{color:("order1"===i?"primary":"order2"===i&&"success")||"I"===i&&"info"||"W"===i&&"warning"||"error"}),s?null:React.createElement(g.A,null)),React.createElement(m.A,null,React.createElement(h.A,{variant:"subtitle2"},React.createElement(b.o,{components:{a(e){const{node:t,...s}=e;return React.createElement("a",L({target:"_blank"},s))}}},a)),React.createElement(h.A,{variant:"caption",sx:{color:"text.disabled"}},(l=n)?(0,R.A)(new Date(l),"dd MMM yyyy p"):"")));var l}var M=s(69597),z=s(82303),I=s(67186);let x;!function(e){let t=function(e){return e[e.LEVEL_UNDEFINED=0]="LEVEL_UNDEFINED",e[e.LEVEL_INFO=1]="LEVEL_INFO",e[e.LEVEL_WARNING=2]="LEVEL_WARNING",e[e.LEVEL_ERROR=3]="LEVEL_ERROR",e}({});e.Level=t;class s extends I.Message{#e=[];constructor(e){super(),I.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)||"object"!=typeof e||("description"in e&&null!=e.description&&(this.description=e.description),"level"in e&&null!=e.level&&(this.level=e.level),"time"in e&&null!=e.time&&(this.time=e.time))}get description(){return I.Message.getFieldWithDefault(this,1,"")}set description(e){I.Message.setField(this,1,e)}get level(){return I.Message.getFieldWithDefault(this,2,t.LEVEL_UNDEFINED)}set level(e){I.Message.setField(this,2,e)}get time(){return I.Message.getWrapperField(this,z.q.protobuf.Timestamp,3)}set time(e){I.Message.setWrapperField(this,3,e)}get has_time(){return null!=I.Message.getField(this,3)}static fromObject(e){const t=new s({});return null!=e.description&&(t.description=e.description),null!=e.level&&(t.level=e.level),null!=e.time&&(t.time=z.q.protobuf.Timestamp.fromObject(e.time)),t}toObject(){const e={};return null!=this.description&&(e.description=this.description),null!=this.level&&(e.level=this.level),null!=this.time&&(e.time=this.time.toObject()),e}serialize(e){const s=e||new I.BinaryWriter;if(this.description.length&&s.writeString(1,this.description),this.level!=t.LEVEL_UNDEFINED&&s.writeEnum(2,this.level),this.has_time&&s.writeMessage(3,this.time,(()=>this.time.serialize(s))),!e)return s.getResultBuffer()}static deserialize(e){const t=e instanceof I.BinaryReader?e:new I.BinaryReader(e),i=new s;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:i.description=t.readString();break;case 2:i.level=t.readEnum();break;case 3:t.readMessage(i.time,(()=>i.time=z.q.protobuf.Timestamp.deserialize(t)));break;default:t.skipField()}return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return s.deserialize(e)}}e.GetLogItem=s;class i extends I.Message{#e=[];constructor(e){super(),I.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[3],this.#e),Array.isArray(e)||"object"!=typeof e||("limit"in e&&null!=e.limit&&(this.limit=e.limit),"offset"in e&&null!=e.offset&&(this.offset=e.offset),"search_tags"in e&&null!=e.search_tags&&(this.search_tags=e.search_tags))}get limit(){return I.Message.getFieldWithDefault(this,1,0)}set limit(e){I.Message.setField(this,1,e)}get offset(){return I.Message.getFieldWithDefault(this,2,0)}set offset(e){I.Message.setField(this,2,e)}get search_tags(){return I.Message.getFieldWithDefault(this,3,[])}set search_tags(e){I.Message.setField(this,3,e)}static fromObject(e){const t=new i({});return null!=e.limit&&(t.limit=e.limit),null!=e.offset&&(t.offset=e.offset),null!=e.search_tags&&(t.search_tags=e.search_tags),t}toObject(){const e={};return null!=this.limit&&(e.limit=this.limit),null!=this.offset&&(e.offset=this.offset),null!=this.search_tags&&(e.search_tags=this.search_tags),e}serialize(e){const t=e||new I.BinaryWriter;if(0!=this.limit&&t.writeInt64(1,this.limit),0!=this.offset&&t.writeInt32(2,this.offset),this.search_tags.length&&t.writeRepeatedString(3,this.search_tags),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof I.BinaryReader?e:new I.BinaryReader(e),s=new i;for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:s.limit=t.readInt64();break;case 2:s.offset=t.readInt32();break;case 3:I.Message.addToRepeatedField(s,3,t.readString());break;default:t.skipField()}return s}serializeBinary(){return this.serialize()}static deserializeBinary(e){return i.deserialize(e)}}e.GetLogReq=i;class r extends I.Message{#e=[];constructor(e){super(),I.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[1],this.#e),Array.isArray(e)||"object"!=typeof e||"items"in e&&null!=e.items&&(this.items=e.items)}get items(){return I.Message.getRepeatedWrapperField(this,s,1)}set items(e){I.Message.setRepeatedWrapperField(this,1,e)}static fromObject(e){const t=new r({});return null!=e.items&&(t.items=e.items.map((e=>s.fromObject(e)))),t}toObject(){const e={};return null!=this.items&&(e.items=this.items.map((e=>e.toObject()))),e}serialize(e){const t=e||new I.BinaryWriter;if(this.items.length&&t.writeRepeatedMessage(1,this.items,(e=>e.serialize(t))),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof I.BinaryReader?e:new I.BinaryReader(e),i=new r;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?t.readMessage(i.items,(()=>I.Message.addToRepeatedWrapperField(i,1,s.deserialize(t),s))):t.skipField();return i}serializeBinary(){return this.serialize()}static deserializeBinary(e){return r.deserialize(e)}}e.GetLogRes=r}(x||(x={}));const D=3e5,j=3,B=[500,502,503],O=!1;class N extends Error{constructor(e){super(e),this.name="MissingPathVarError"}}const W=new N("path variable is missing");const k={[x.Level.LEVEL_UNDEFINED]:"",[x.Level.LEVEL_INFO]:"I",[x.Level.LEVEL_WARNING]:"W",[x.Level.LEVEL_ERROR]:"E"};async function V(e){let{domainID:t}=e;const s=(0,M.N4)(),i=(0,M.w9)(!1),r={pathVars:{"{domain_id}":t}},n=new x.GetLogReq({limit:50,offset:0,search_tags:[]}),[a,l]=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const{timeout:r=D,retryCount:n=j,retryableCodes:a=B,contentTypeJson:l=O}=t;let{newPath:o,missingVar:c}=function(e,t){let s=!1,i=e;for(const[e,s]of Object.entries(t))i=i.replace(e,s);return s=i.includes("{"),{newPath:i,missingVar:s}}(i+"/activitylog/log/domain/{domain_id}/",t.pathVars||{});if(c)return Promise.reject(W);const u=e.serializeBinary(),d={method:"GET",headers:new Headers({Authorization:`Bearer ${s}`,"Content-Type":l?"application/json":"application/x-protobuf",Accept:l?"application/json":"application/x-protobuf",...Object.fromEntries(t.headers||new Headers)}),...t.cache?{cache:t.cache}:{}};return o=o+"?"+new URLSearchParams({get_params:btoa(String.fromCharCode.apply(null,Array.from(u)))}),async function e(t){try{const s=await fetch(o,d);if(!s.ok&&a.includes(s.status)&&0!==t)return e(t-1);if(l)try{return[await s.json(),s.status]}catch(e){return console.log("error in reading response body: ",e),[new x.GetLogRes,s.status]}try{const e=await s.arrayBuffer();if(0===e.byteLength)return[new x.GetLogRes,s.status];const t=new Uint8Array(e);return[x.GetLogRes.deserialize(t),s.status]}catch(e){return console.error("error in reading response body",e),[new x.GetLogRes,s.status]}}catch(e){return console.log("error getting data: ",e),[new x.GetLogRes,0]}}(n)}(n,r,i,s);if(200!==l)return{logs:null,error:"Some thing went wrong."};const o=await a.toObject();if(!o||!o.items)return{logs:null,error:"Some thing went wrong."};const c=[];return o.items.map((e=>{c.push({id:"",title:e.description,time:new Date(1e3*e.time.seconds),type:k[e.level]})})),{logs:c,error:null}}function G(e){let{domainID:t}=e;const[s,r]=i.useState(!1),[n,a]=i.useState();return i.useEffect((()=>{!async function(){r(!0);try{const e=await V({domainID:t});if(e.error)return;a(e)}catch(e){console.error(e),a({error:"failed to get notifications",logs:null})}finally{r(!1)}}()}),[t]),i.createElement(c.Ay,{xs:12,md:6,lg:4},i.createElement(A,{error:n?.error,loading:s,list:n?.logs}))}const S=function(e){let{domainID:t}=e;return React.createElement(l.A,null,React.createElement(o.A,{title:"Recent Notifications"}),React.createElement(G,{domainID:t}))};function C(e){let{domainID:t}=e;return React.createElement(React.Fragment,null,React.createElement(a.Z6,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},React.createElement(n.A,null,React.createElement(S,{domainID:t}))))}function T(e){let{domID:t,domainID:s}=e;if("local-testing-root"!==t)return i.createElement(C,{domainID:s});r.createRoot(document.getElementById(t)).render(i.createElement(i.StrictMode,null,i.createElement(C,{domainID:s})))}},82303:(e,t,s)=>{s.d(t,{q:()=>r});var i=s(67186);let r;!function(e){let t;!function(e){class t extends i.Message{#e=[];constructor(e){super(),i.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)||"object"!=typeof e||("seconds"in e&&null!=e.seconds&&(this.seconds=e.seconds),"nanos"in e&&null!=e.nanos&&(this.nanos=e.nanos))}get seconds(){return i.Message.getFieldWithDefault(this,1,0)}set seconds(e){i.Message.setField(this,1,e)}get nanos(){return i.Message.getFieldWithDefault(this,2,0)}set nanos(e){i.Message.setField(this,2,e)}static fromObject(e){const s=new t({});return null!=e.seconds&&(s.seconds=e.seconds),null!=e.nanos&&(s.nanos=e.nanos),s}toObject(){const e={};return null!=this.seconds&&(e.seconds=this.seconds),null!=this.nanos&&(e.nanos=this.nanos),e}serialize(e){const t=e||new i.BinaryWriter;if(0!=this.seconds&&t.writeInt64(1,this.seconds),0!=this.nanos&&t.writeInt32(2,this.nanos),!e)return t.getResultBuffer()}static deserialize(e){const s=e instanceof i.BinaryReader?e:new i.BinaryReader(e),r=new t;for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:r.seconds=s.readInt64();break;case 2:r.nanos=s.readInt32();break;default:s.skipField()}return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return t.deserialize(e)}}e.Timestamp=t}(t||(t=e.protobuf||(e.protobuf={})))}(r||(r={}))}}]);