"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[91],{94091:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var n=a(6530),o=a(47086),l=a(65990),r=a(22771),s=a(12302),i=a(37529),c=a(24525),u=a(81550),d=a(61580),p=a(18088),m=a(55106),h=a(983),g=a(16481),R=a(78722),A=a(14041),v=a(54357),b=a(90028),x=a(59193),w=a(71470),f=a(49556),y=a(24300),P=a(37296),E=a(61308),I=a(86310),B=a(18526);function L(e){return(0,B.Ay)("MuiToolbar",e)}(0,I.A)("MuiToolbar",["root","gutters","regular","dense"]);var S=a(31085);const M=(0,x.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableGutters&&t.gutters,t[a.variant]]}})((0,w.A)((({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]})))),j=A.forwardRef((function(e,t){const a=(0,f.b)({props:e,name:"MuiToolbar"}),{className:n,component:o="div",disableGutters:l=!1,variant:r="regular",...s}=a,i={...a,component:o,disableGutters:l,variant:r},c=(e=>{const{classes:t,disableGutters:a,variant:n}=e,o={root:["root",!a&&"gutters",n]};return(0,b.A)(o,L,t)})(i);return(0,S.jsx)(M,{as:o,className:(0,v.A)(c.root,n),ref:t,ownerState:i,...s})}));var k=a(26117),D=a(46406),C=a(26993),T=a(77776);const z=(0,T.A)((0,S.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),F=(0,T.A)((0,S.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),N=A.forwardRef((function(e,t){const{backIconButtonProps:a,count:n,disabled:o=!1,getItemAriaLabel:l,nextIconButtonProps:r,onPageChange:s,page:i,rowsPerPage:c,showFirstButton:u,showLastButton:d,slots:p={},slotProps:m={},...h}=e,g=(0,k.I)(),A=p.firstButton??R.A,v=p.lastButton??R.A,b=p.nextButton??R.A,x=p.previousButton??R.A,w=p.firstButtonIcon??F,f=p.lastButtonIcon??z,y=p.nextButtonIcon??C.A,P=p.previousButtonIcon??D.A,E=g?v:A,I=g?b:x,B=g?x:b,L=g?A:v,M=g?m.lastButton:m.firstButton,j=g?m.nextButton:m.previousButton,T=g?m.previousButton:m.nextButton,N=g?m.firstButton:m.lastButton;return(0,S.jsxs)("div",{ref:t,...h,children:[u&&(0,S.jsx)(E,{onClick:e=>{s(e,0)},disabled:o||0===i,"aria-label":l("first",i),title:l("first",i),...M,children:g?(0,S.jsx)(f,{...m.lastButtonIcon}):(0,S.jsx)(w,{...m.firstButtonIcon})}),(0,S.jsx)(I,{onClick:e=>{s(e,i-1)},disabled:o||0===i,color:"inherit","aria-label":l("previous",i),title:l("previous",i),...j??a,children:g?(0,S.jsx)(y,{...m.nextButtonIcon}):(0,S.jsx)(P,{...m.previousButtonIcon})}),(0,S.jsx)(B,{onClick:e=>{s(e,i+1)},disabled:o||-1!==n&&i>=Math.ceil(n/c)-1,color:"inherit","aria-label":l("next",i),title:l("next",i),...T??r,children:g?(0,S.jsx)(P,{...m.previousButtonIcon}):(0,S.jsx)(y,{...m.nextButtonIcon})}),d&&(0,S.jsx)(L,{onClick:e=>{s(e,Math.max(0,Math.ceil(n/c)-1))},disabled:o||i>=Math.ceil(n/c)-1,"aria-label":l("last",i),title:l("last",i),...N,children:g?(0,S.jsx)(w,{...m.firstButtonIcon}):(0,S.jsx)(f,{...m.lastButtonIcon})})]})}));var H=a(81141);function U(e){return(0,B.Ay)("MuiTablePagination",e)}const $=(0,I.A)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var G,O=a(85800);const q=(0,x.Ay)(m.A,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})((0,w.A)((({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})))),V=(0,x.Ay)(j,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${$.actions}`]:t.actions,...t.toolbar})})((0,w.A)((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${$.actions}`]:{flexShrink:0,marginLeft:20}})))),_=(0,x.Ay)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),Y=(0,x.Ay)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})((0,w.A)((({theme:e})=>({...e.typography.body2,flexShrink:0})))),W=(0,x.Ay)(E.A,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${$.selectIcon}`]:t.selectIcon,[`& .${$.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${$.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),J=(0,x.Ay)(P.A,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),K=(0,x.Ay)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})((0,w.A)((({theme:e})=>({...e.typography.body2,flexShrink:0}))));function Q({from:e,to:t,count:a}){return`${e}â€“${t} of ${-1!==a?a:`more than ${t}`}`}function X(e){return`Go to ${e} page`}const Z=A.forwardRef((function(e,t){const a=(0,f.b)({props:e,name:"MuiTablePagination"}),{ActionsComponent:n=N,backIconButtonProps:o,colSpan:l,component:r=m.A,count:s,disabled:i=!1,getItemAriaLabel:c=X,labelDisplayedRows:u=Q,labelRowsPerPage:d="Rows per page:",nextIconButtonProps:p,onPageChange:h,onRowsPerPageChange:g,page:R,rowsPerPage:x,rowsPerPageOptions:w=[10,25,50,100],SelectProps:P={},showFirstButton:E=!1,showLastButton:I=!1,slotProps:B={},slots:L={},...M}=a,j=a,k=(e=>{const{classes:t}=e;return(0,b.A)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},U,t)})(j),D=B?.select??P,C=D.native?"option":J;let T;r!==m.A&&"td"!==r||(T=l||1e3);const z=(0,H.A)(D.id),F=(0,H.A)(D.labelId),$={slots:L,slotProps:B},[Z,ee]=(0,O.A)("root",{ref:t,className:k.root,elementType:q,externalForwardedProps:{...$,component:r,...M},ownerState:j,additionalProps:{colSpan:T}}),[te,ae]=(0,O.A)("toolbar",{className:k.toolbar,elementType:V,externalForwardedProps:$,ownerState:j}),[ne,oe]=(0,O.A)("spacer",{className:k.spacer,elementType:_,externalForwardedProps:$,ownerState:j}),[le,re]=(0,O.A)("selectLabel",{className:k.selectLabel,elementType:Y,externalForwardedProps:$,ownerState:j,additionalProps:{id:F}}),[se,ie]=(0,O.A)("select",{className:k.select,elementType:W,externalForwardedProps:$,ownerState:j}),[ce,ue]=(0,O.A)("menuItem",{className:k.menuItem,elementType:C,externalForwardedProps:$,ownerState:j}),[de,pe]=(0,O.A)("displayedRows",{className:k.displayedRows,elementType:K,externalForwardedProps:$,ownerState:j});return(0,S.jsx)(Z,{...ee,children:(0,S.jsxs)(te,{...ae,children:[(0,S.jsx)(ne,{...oe}),w.length>1&&(0,S.jsx)(le,{...re,children:d}),w.length>1&&(0,S.jsx)(se,{variant:"standard",...!D.variant&&{input:G||(G=(0,S.jsx)(y.Ay,{}))},value:x,onChange:g,id:z,labelId:F,...D,classes:{...D.classes,root:(0,v.A)(k.input,k.selectRoot,(D.classes||{}).root),select:(0,v.A)(k.select,(D.classes||{}).select),icon:(0,v.A)(k.selectIcon,(D.classes||{}).icon)},disabled:i,...ie,children:w.map((e=>(0,A.createElement)(ce,{...ue,key:e.label?e.label:e,value:e.value?e.value:e},e.label?e.label:e)))}),(0,S.jsx)(de,{...pe,children:u({from:0===s?0:R*x+1,to:-1===s?(R+1)*x:-1===x?s:Math.min(s,(R+1)*x),count:-1===s?-1:s,page:R})}),(0,S.jsx)(n,{className:k.actions,backIconButtonProps:o,count:s,nextIconButtonProps:p,onPageChange:h,page:R,rowsPerPage:x,showFirstButton:E,showLastButton:I,slotProps:B.actions,slots:L.actions,getItemAriaLabel:c,disabled:i})]})})}));var ee=a(98268);const te=(0,T.A)((0,S.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var ae=a(95374),ne=a(5319),oe=a(96809),le=a(8836);const re=(0,T.A)((0,S.jsx)("path",{d:"M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9zm6.82 6L12 12.72 5.18 9 12 5.28zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73z"}),"SchoolOutlined"),se=(0,T.A)((0,S.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),ie=(0,T.A)((0,S.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2zM9 9h6c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1H9c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1m6.5-5-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"}),"DeleteOutlineRounded"),ce=(0,T.A)((0,S.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp"),ue=(0,T.A)((0,S.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var de=a(19909),pe=a(42173),me=a(28804),he=function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e}(he||{});function ge(e){var t;let{domainID:a,pageRules:v,isLoading:b,defaultPageRule:x}=e;const w=(0,n.A)(),[f,y]=(0,A.useState)(5),[P,E]=(0,A.useState)(0),[I,B]=(0,A.useState)(void 0);async function L(e,t){if(!v)return;B(e);const n=[...v];if(t===he.Up){if(e<=0||e>=v.length)return void B(void 0);[n[e],n[e-1]]=[n[e-1],n[e]]}else if(t===he.Down){if(e<0||e>=v.length-1)return void B(void 0);[n[e],n[e+1]]=[n[e+1],n[e]]}const o=[];n.forEach((e=>{o.push(e.pageRuleID)})),x&&o.push(x.pageRuleID);const l=await async function(e,t){const a=new le.I.UpdatePageRulesPriorityRequest({pageRuleIDs:t});return await(0,oe.cs)(a,{pathVars:{"{domain_id}":e}},(0,ne.w9)(!1),(0,ne.N4)())}(a,o);200===l&&(ae.b.emit(ae.B.PriorityChanged,[...n]),(0,me.ck)("adv_rule_priority_changed")),B(void 0)}return React.createElement(r.A,{sx:{mt:5,mb:3}},React.createElement(s.A,{sx:{py:3}},React.createElement(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement(r.A,{sx:{ml:4,maxWidth:"70%"}},React.createElement(l.A,{variant:"h5",color:"textPrimary"},"Override Global Settings"),React.createElement(l.A,{variant:"body2",sx:{mb:2},color:"textSecondary"},"You can create rules to best optimize the various pages served from your domain. RabbitLoader compares every page and assets served with the path patterns in your rules to optimize the performance. Arrange rules in the order in which you want RabbitLoader to evaluate them.")),React.createElement(r.A,{sx:{mr:4,mb:4,display:"flex",columnGap:3}},React.createElement(i.A,{variant:"contained",onClick:()=>ae.b.emit(ae.B.AddOrUpdatePageRuleAction),color:"primary"},React.createElement(te,null)," Add Rule"),React.createElement(i.A,{variant:"outlined",href:"https://rabbitloader.com/kb/setting-page-rules/",target:"__blank"},React.createElement(re,{sx:{mr:1}})," Rule Help"))),React.createElement(c.A,null,React.createElement(u.A,null,React.createElement(d.A,null,React.createElement(p.A,{sx:{pl:3}},React.createElement(m.A,{colSpan:8},"Sequence"," ",React.createElement(o.A,{title:"Rules are compared in ascending order of their matching sequence until a match is found. So a rule with sequence 0 will be compared first when a URL is optimized. If the rule matches, no further rules with higher sequence number will be evaluated for the URL. Following the same convention, the * rule should come at the last and it should have the highest sequence."},React.createElement(ee.A,null))),React.createElement(m.A,{colSpan:8},"URL Pattern"),React.createElement(m.A,{colSpan:8},"Cache"),React.createElement(m.A,null,"Actions"))),React.createElement(h.A,null,b&&void 0===v?React.createElement(p.A,null,React.createElement(m.A,{colSpan:25,align:"center",sx:{height:200}},React.createElement(g.A,null))):React.createElement(React.Fragment,null,0===(null==v?void 0:v.length)&&React.createElement(p.A,null,React.createElement(m.A,{colSpan:25,height:300,align:"center"},React.createElement("img",{src:de,alt:"No Data Found",style:{width:160}}),React.createElement(l.A,{variant:"body1"},"No page rule has been set yet."))),null==v?void 0:v.slice(P*f,P*f+f).map(((e,t)=>React.createElement(p.A,{key:"".concat(e.pageRuleID),sx:{pl:3,opacity:I===t?"60%":"100%"}},React.createElement(m.A,{colSpan:8},t+1),React.createElement(m.A,{colSpan:8},React.createElement(o.A,{title:"The rule will apply to all pages matching this pattern"},React.createElement(l.A,null,e.pathPattern))),React.createElement(m.A,{colSpan:8},(e=>{const t=e===le.I.ContentNature.FullDynamic?"Disabled":"Enabled",a="Cache is ".concat(t," for pages matching this rule");return React.createElement(o.A,{title:a},React.createElement(l.A,null,t))})(e.contentNature)),React.createElement(m.A,null,React.createElement(o.A,{title:"Modify optimization settings"},React.createElement(R.A,{onClick:()=>ae.b.emit(ae.B.AddOrUpdatePageRuleAction,e)},React.createElement(se,{sx:{color:w.palette.primary.main}}))),React.createElement(o.A,{title:"Delete rule"},React.createElement(R.A,{"aria-label":"delete",onClick:async()=>{B(t);const n=await async function(e){let{pageRuleID:t,domainID:a}=e;const n=new le.I.DeletePageRuleRequest({pageRuleID:t});return await(0,oe.jY)(n,{pathVars:{"{domain_id}":a}},(0,ne.w9)(!1),(0,ne.N4)())}({domainID:a,pageRuleID:e.pageRuleID});200===n?((0,pe.M8)({variant:"success",message:"Successfully deleted page rule"}),ae.b.emit(ae.B.RulesChanged)):(0,pe.M8)({variant:"warning",message:"Failed to delete page rule"}),B(void 0)}},React.createElement(ie,{style:{color:w.palette.error.main}}))),React.createElement(o.A,{title:"Move up for earlier evaluation"},React.createElement(R.A,{onClick:()=>L(t,he.Up)},React.createElement(ce,null))),React.createElement(o.A,{title:"Move down for later evaluation"},React.createElement(R.A,{onClick:()=>L(t,he.Down)},React.createElement(ue,null))))))))))),React.createElement(Z,{page:P,rowsPerPage:f,component:"div",count:null!==(t=null==v?void 0:v.length)&&void 0!==t?t:0,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:e=>y(e.target.value),onPageChange:(e,t)=>E(t)})))}},19909:(e,t,a)=>{e.exports=a.p+"e503aec708eb2a9768c7.svg"}}]);