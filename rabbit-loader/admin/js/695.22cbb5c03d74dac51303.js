"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[695],{11652:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(14041),n=r(25865),i=r(25072),s=r(56047),o=r(59709);const l=(0,i.Ay)(n.A)((e=>{let{theme:t}=e;return{"& .apexcharts-canvas":{"& .apexcharts-tooltip":{...(0,o.Vz)({color:t.palette.background.default}),color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&.apexcharts-theme-light":{borderColor:"transparent",...(0,o.Vz)({color:t.palette.background.default})}},"& .apexcharts-xaxistooltip":{...(0,o.Vz)({color:t.palette.background.default}),borderColor:"transparent",color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&:before":{borderBottomColor:(0,s.X4)(t.palette.grey[500],.24)},"&:after":{borderBottomColor:(0,s.X4)(t.palette.background.default,.8)}},"& .apexcharts-tooltip-title":{textAlign:"center",fontWeight:t.typography.fontWeightBold,backgroundColor:(0,s.X4)(t.palette.grey[500],.08),color:t.palette.text["light"===t.palette.mode?"secondary":"primary"]},"& .apexcharts-legend":{padding:0},"& .apexcharts-legend-series":{display:"inline-flex !important",alignItems:"center"},"& .apexcharts-legend-marker":{marginRight:8},"& .apexcharts-legend-text":{lineHeight:"18px",textTransform:"capitalize"}}}})),c=(0,a.memo)(l)},20660:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(12400),n=r(9832),i=r(92991),s=r(32017),o=r(95663),l=r(18755),c=r(27020),u=r(14041);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(null,arguments)}const p=(0,u.forwardRef)((function(e,t){return u.createElement(c.A,d({direction:"up",ref:t},e))}));function m(e){let{lighthouseJSONErrMessage:t,title:r=""}=e;const[c,d]=(0,u.useState)(!0),m=()=>{d(!1)};return u.createElement(u.Fragment,null,u.createElement(n.A,{open:c,TransitionComponent:p,keepMounted:!0,onClose:m,"aria-describedby":"alert-dialog-slide-description"},u.createElement(l.A,null,r.length>0?r:"Lighthouse is experiencing an issue!"),u.createElement(s.A,null,u.createElement(o.A,{id:"alert-dialog-slide-description"},t)),u.createElement(i.A,null,u.createElement(a.A,{onClick:m},"Ok"))))}},56695:(e,t,r)=>{r.d(t,{w:()=>M});var a=r(14041),n=r(25873),i=r(57621),s=r(15156),o=r(83818),l=r(20660),c=r(68355),u=r(11652),d=r(70927);function p(e){let{value:t}=e;const r=(0,d.A)(),n=()=>t>=90?[r.palette.success.light,r.palette.success.main]:t>=50?[r.palette.warning.light,r.palette.warning.main]:[r.palette.error.light,r.palette.error.main],i=(0,c.u)({legend:{show:!1},fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:n()[0],opacity:1},{offset:100,color:n()[1],opacity:1}]}},plotOptions:{radialBar:{hollow:{size:"64%"},dataLabels:{name:{offsetY:-16},value:{offsetY:8},total:{label:"Score",formatter:()=>`${t}`}}}}});return a.createElement(u.A,{dir:"ltr",type:"radialBar",series:[t],options:i,height:230})}var m=r(63213),g=r(60589),h=r(80985),f=r(54167),y=r(83761);function b(e){let{progress:t}=e;return a.createElement(h.A,{spacing:1},a.createElement(h.A,{direction:"row",alignItems:"center"},a.createElement(f.A,{variant:"subtitle2",sx:{flexGrow:1}},t.title),a.createElement(f.A,{variant:"body2",sx:{color:"text.secondary"}},"Â (",function(e){if(!e)return"0%";const t=Number(e)/100;return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}).format(t)}(t.value),")")),a.createElement(y.A,{variant:"determinate",value:t.value,color:(t.value<=30?"info":t.value<=60&&"warning")||"primary"}))}var w=r(57987);function v(e){if(!e)return"";if(!e.includes("-"))return e;const t=e.split("-").join(" ");return t.charAt(0).toUpperCase()+t.slice(1)}function A(e){return e?parseFloat((0,w.kB)(100*e)):0}const x=e=>{let{lighthouseJSON:t,title:r}=e;return t.error&&t.error.message?a.createElement(l.default,{lighthouseJSONErrMessage:t.error.message}):a.createElement(m.A,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},a.createElement(m.A,{sx:{width:"100%"}},a.createElement(g.A,{variant:"h6",sx:{mb:2,textAlign:"center"}},r),a.createElement(m.A,{sx:{display:"flex",flexDirection:"column",gap:2}},a.createElement(m.A,null,a.createElement(p,{value:A(t?.lighthouseResult?.categories?.performance?.score)})),Object.values(t?.lighthouseResult?.audits??{}).sort(((e,t)=>e.title>t.title?1:-1)).map(((e,t)=>null===e.title||null===e.score?a.createElement(a.Fragment,{key:t}):a.createElement(m.A,{key:t,style:{width:"100%"}},a.createElement("div",null,a.createElement(b,{progress:{title:v(e.title),value:A(e.score)}}))))))))};var R=r(66215),E=r(1123),k=r(30457);const S=e=>{let{message:t}=e;const[r,n]=(0,a.useState)(!0);return a.createElement(m.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},a.createElement(R.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:r},a.createElement(E.Ay,{container:!0,direction:"column",alignItems:"center",spacing:2},a.createElement(E.Ay,{item:!0},a.createElement(k.A,{color:"inherit"})),a.createElement(E.Ay,{item:!0},a.createElement(g.A,{style:{textColor:"white"},color:"white"},t)))))};var z=r(8836),U=r(96809),F=r(5319);const B={FirstContentFulPaint:"first-contentful-paint",TimeToInteractive:"interactive",SpeedIndex:"speed-index",TotalBlockingTime:"total-blocking-time",LargestContentFulPaint:"largest-contentful-paint",CumulativeLayoutShift:"cumulative-layout-shift",LargestContentFulPaintEle:"largest-contentful-paint-element"},C=async(e,t,r,a,n)=>{try{const i=((e,t,r)=>{if(null==e||null==e.audits)return void console.log("no lighthouseResult");const a=new z.I.ScoreMetrics;null!=e.categories&&null!=e.categories.performance&&(a.MainScore=e?.categories?.performance?.score);const n=e.audits;for(const e in B)if(n[B[e]])if("LargestContentFulPaintEle"===e){const t=new z.I.LCPE;null!=n[B[e]]&&null!=n[B[e]].details&&null!=n[B[e]].details.items&&null!=n[B[e]].details.items[0]&&null!=n[B[e]].details.items[0].items&&null!=n[B[e]].details.items[0].items[0]&&null!=n[B[e]].details.items[0].items[0].node&&(t.Selector=n[B[e]].details.items[0].items[0].node?.selector,t.Snippet=n[B[e]].details.items[0].items[0].node?.snippet),a[e]=t}else{const t=new z.I.Score;t.numericUnit=n[B[e]].numericUnit,t.numericValue=n[B[e]].setNumericvalue,t.scale=n[B[e]].score,a[e]=t}const i=new z.I.ScoreStrategy;i.device=t||z.I.ScoreDevice.Desktop,i.version=r;const s=new z.I.SaveScoreRequest;return s.metrics=a,s.strategy=i,s})(e,a,n),s=((e,t)=>({pathVars:{"{domain_id}":e,"{url_id}":t}}))(t,r),o=(0,F.w9)(!1),l=(0,F.N4)(),[c,u]=await(0,U.ir)(i,s,o,l);200===u||console.error("Failed to save score. Status code:",u,"Error:",c)}catch(e){console.error("An error occurred while saving the score:",e)}};var W=r(69608),_=r(79537);const O=(0,a.lazy)((()=>Promise.resolve().then(r.bind(r,20660)))),L=e=>{let{url:t,domain_id:r,url_id:n,device:i}=e;const[s,o]=(0,a.useState)("Warming up ...."),[l,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[p,g]=(0,a.useState)(""),h=(0,a.useCallback)((e=>(console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e)),[]),f=(0,a.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.indexOf("wpunittest");const r=new URL("https://www.googleapis.com/pagespeedonline/v5/runPagespeed");if(r.searchParams.append("url",e),i&&(i===z.I.ScoreDevice.Mobile?r.searchParams.append("strategy","mobile"):r.searchParams.append("strategy","desktop")),t){const e="AIzaSyAja4LWLWbP6bE1FnaDGmc9fu-YXQtOh7Y";e&&r.searchParams.append("key",e)}const a=await fetch(r);return 200!==a.status?429===a.status||a.status>=500?t||429!==a.status?(g("There is a temporary issue communicating to Google Lighthouse. Please try again in a while."),{errorMsg:"error in communicating lighthouse"}):(console.warn("Retrying with API key due to 429 rate limit."),await f(e,!0)):(g("There is an internal issue. Please try again in a while."),{errorMsg:"internal issue"}):await a.json()}),[i]);return(0,a.useEffect)((()=>{if(!t)return;const e=h(t);o("Warming up ...."),(0,_.DoWarmup)(e).then((()=>{o("Analyzing with lighthouse ...."),f(e).then((e=>{c(e),e&&e.lighthouseResult&&C(e?.lighthouseResult,r,n,i,z.I.ScoreVersion.Optimized)}));const t=new URL(e);t.searchParams.append("norl","1"),f(t.toString()).then((e=>{d(e),e&&e.lighthouseResult&&C(e?.lighthouseResult,r,n,i,z.I.ScoreVersion.Original)}))}))}),[t,i,r,n,f,h]),React.createElement(React.Fragment,null,u&&l?React.createElement(React.Fragment,null,p&&p.length>0?React.createElement(React.Fragment,null,React.createElement(O,{lighthouseJSONErrMessage:p,title:"Lighthouse Unavailable"})):React.createElement(m.A,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},React.createElement(x,{lighthouseJSON:u,title:"Without RabbitLoader"}),React.createElement(W.A,{orientation:"vertical",flexItem:!0}),React.createElement(x,{lighthouseJSON:l,title:"With RabbitLoader"}))):React.createElement(React.Fragment,null,React.createElement(S,{message:s})))},P=function(e){let{url:t,domain_id:r,url_id:a,device:n}=e;return React.createElement(o.Z6,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},React.createElement(s.A,null,React.createElement(g.A,{sx:{mt:-1,mb:2,color:"black"}},t),React.createElement("div",{className:"App",style:{display:"contents",width:"100%"}},React.createElement(L,{url:t,domain_id:r,url_id:a,device:n}),React.createElement(i.N9,null))))},M=e=>{let{id:t,url:r,domain_id:i,url_id:s,device:o}=e;if("local-testing-root"!==t)return a.createElement(P,{url:r,domain_id:i,url_id:s,device:o});n.createRoot(document.getElementById(t)).render(a.createElement(a.StrictMode,null,a.createElement(P,{url:r,domain_id:i,url_id:s,device:o})))}},57987:(e,t,r)=>{r.d(t,{kB:()=>n});var a=r(61481);function n(e){const{code:t}=function(){const{currentLang:{numberFormat:{code:e,currency:t}}}=(0,a.j)();return{code:e??"en-US",currency:t??"USD"}}();if(!e)return"";const r=Number(e);return new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}},68355:(e,t,r)=>{r.d(t,{A:()=>a.A,u:()=>c});var a=r(11652),n=r(82451),i=r.n(n),s=r(62987),o=r(56047),l=r(36951);function c(e){const t=(0,s.A)(),r=function(e,t){const r=(0,s.A)(),a=(0,l.A)(r.breakpoints.up(t));(0,l.A)(r.breakpoints.down(t)),(0,l.A)(r.breakpoints.between(t,void 0)),(0,l.A)(r.breakpoints.only(t));return a}(0,"sm"),a={show:!0,label:"Total",color:t.palette.text.secondary,fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight,lineHeight:t.typography.subtitle2.lineHeight},n={offsetY:8,color:t.palette.text.primary,fontSize:t.typography.h3.fontSize,fontWeight:t.typography.h3.fontWeight,lineHeight:t.typography.h3.lineHeight},c={colors:[t.palette.primary.main,t.palette.warning.main,t.palette.info.main,t.palette.error.main,t.palette.success.main,t.palette.warning.dark,t.palette.success.darker,t.palette.info.dark,t.palette.info.darker],chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:t.palette.text.disabled,fontFamily:t.typography.fontFamily},states:{hover:{filter:{type:"lighten",value:.04}},active:{filter:{type:"darken",value:.88}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:t.palette.divider,xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{},markers:{size:0,strokeColors:t.palette.background.paper},tooltip:{theme:!1,x:{show:!0}},legend:{show:!0,fontSize:13,position:"top",horizontalAlign:"right",markers:{radius:12},fontWeight:500,itemMargin:{horizontal:8},labels:{colors:t.palette.text.primary}},plotOptions:{bar:{borderRadius:r?3:1,columnWidth:"28%",borderRadiusApplication:"end",borderRadiusWhenStacked:"last"},pie:{donut:{labels:{show:!0,value:n,total:a}}},radialBar:{track:{strokeWidth:"100%",background:(0,o.X4)(t.palette.grey[500],.16)},dataLabels:{value:n,total:a}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:t.palette.divider,connectorColors:t.palette.divider}},polarArea:{rings:{strokeColor:t.palette.divider},spokes:{connectorColors:t.palette.divider}}},responsive:[{breakpoint:t.breakpoints.values.sm,options:{plotOptions:{bar:{columnWidth:"40%"}}}},{breakpoint:t.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"32%"}}}}]};return i()(c,e)}},79537:(e,t,r)=>{r.r(t),r.d(t,{DoWarmup:()=>g});var a=r(67186);let n;!function(e){class t extends a.Message{#e=[];constructor(e){super(),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return a.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){a.Message.setField(this,1,e)}static fromObject(e){const r=new t({});return null!=e.targetUrl&&(r.targetUrl=e.targetUrl),r}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new a.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e),n=new t;for(;r.nextField()&&!r.isEndGroup();)1===r.getFieldNumber()?n.targetUrl=r.readString():r.skipField();return n}serializeBinary(){return this.serialize()}static deserializeBinary(e){return t.deserialize(e)}}e.WarmupRequest=t;class r extends a.Message{#e=[];constructor(e){super(),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)}static fromObject(e){return new r({})}toObject(){return{}}serialize(e){const t=e||new a.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),n=new r;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return n}serializeBinary(){return this.serialize()}static deserializeBinary(e){return r.deserialize(e)}}e.WarmupResponse=r;class n extends a.Message{#e=[];constructor(e){super(),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return a.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){a.Message.setField(this,1,e)}static fromObject(e){const t=new n({});return null!=e.targetUrl&&(t.targetUrl=e.targetUrl),t}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new a.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),r=new n;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?r.targetUrl=t.readString():t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return n.deserialize(e)}}e.PurgeAllRequest=n;class i extends a.Message{#e=[];constructor(e){super(),a.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],this.#e),Array.isArray(e)}static fromObject(e){return new i({})}toObject(){return{}}serialize(e){const t=e||new a.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof a.BinaryReader?e:new a.BinaryReader(e),r=new i;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return i.deserialize(e)}}e.PurgeAllResponse=i}(n||(n={}));const i=3e5,s=3,o=[500,502,503],l=!1;class c extends Error{constructor(e){super(e),this.name="MissingPathVarError"}}const u=new c("path variable is missing");const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const{timeout:c=i,retryCount:d=s,retryableCodes:p=o,contentTypeJson:m=l}=t;let{newPath:g,missingVar:h}=function(e,t){let r=!1,a=e;for(const[e,r]of Object.entries(t))a=a.replace(e,r);return r=a.includes("{"),{newPath:a,missingVar:r}}(a+"/rlwarmupproxy/warmup",t.pathVars||{});if(h)return Promise.reject(u);const f=e.serializeBinary(),y={method:"GET",headers:new Headers({Authorization:`Bearer ${r}`,"Content-Type":m?"application/json":"application/x-protobuf",Accept:m?"application/json":"application/x-protobuf",...Object.fromEntries(t.headers||new Headers)}),...t.cache?{cache:t.cache}:{}};return g=g+"?"+new URLSearchParams({get_params:btoa(String.fromCharCode.apply(null,Array.from(f)))}),async function e(t){try{const r=await fetch(g,y);if(!r.ok&&p.includes(r.status)&&0!==t)return e(t-1);if(m)try{return[await r.json(),r.status]}catch(e){return console.log("error in reading response body: ",e),[new n.WarmupResponse,r.status]}try{const e=await r.arrayBuffer(),t=new Uint8Array(e);return[n.WarmupResponse.deserialize(t),r.status]}catch(e){return console.error("error in reading response body",e),[new n.WarmupResponse,r.status]}}catch(e){return console.log("error getting data: ",e),[new n.WarmupResponse,0]}}(d)};var p=r(5319);const m=e=>(console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e);async function g(e){const t=m(e);if(new URL(t).host!==window.location.host){const e=new n.WarmupRequest;e.targetUrl=t;const[r,a]=await d(e,{},"",(0,p.HZ)());return a}const r=new URL(t);return r.searchParams.append("rl-warmup","1"),r.searchParams.append("rl-rand",String(Math.floor((new Date).getTime()/1e3))),r.searchParams.append("rl-only-after",String(Math.floor((new Date).getTime()/1e3))),(await fetch(r,{credentials:"omit"})).status}}}]);