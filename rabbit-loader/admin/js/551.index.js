"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[551],{11652:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(14041),a=r(25865),i=r(25072),o=r(56047),l=r(59709);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=(0,i.Ay)(a.A)((e=>{let{theme:t}=e;return{"& .apexcharts-canvas":{"& .apexcharts-tooltip":c(c({},(0,l.Vz)({color:t.palette.background.default})),{},{color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&.apexcharts-theme-light":c({borderColor:"transparent"},(0,l.Vz)({color:t.palette.background.default}))}),"& .apexcharts-xaxistooltip":c(c({},(0,l.Vz)({color:t.palette.background.default})),{},{borderColor:"transparent",color:t.palette.text.primary,boxShadow:t.customShadows.dropdown,borderRadius:1.25*t.shape.borderRadius,"&:before":{borderBottomColor:(0,o.X4)(t.palette.grey[500],.24)},"&:after":{borderBottomColor:(0,o.X4)(t.palette.background.default,.8)}}),"& .apexcharts-tooltip-title":{textAlign:"center",fontWeight:t.typography.fontWeightBold,backgroundColor:(0,o.X4)(t.palette.grey[500],.08),color:t.palette.text["light"===t.palette.mode?"secondary":"primary"]},"& .apexcharts-legend":{padding:0},"& .apexcharts-legend-series":{display:"inline-flex !important",alignItems:"center"},"& .apexcharts-legend-marker":{marginRight:8},"& .apexcharts-legend-text":{lineHeight:"18px",textTransform:"capitalize"}}}})),d=(0,n.memo)(p)},68355:(e,t,r)=>{r.d(t,{A:()=>n.A,u:()=>c});var n=r(11652),a=r(82451),i=r.n(a),o=r(62987),l=r(56047),s=r(36951);function c(e){const t=(0,o.A)(),r=function(e,t){const r=(0,o.A)(),n=(0,s.A)(r.breakpoints.up(t));(0,s.A)(r.breakpoints.down(t)),(0,s.A)(r.breakpoints.between(t,void 0)),(0,s.A)(r.breakpoints.only(t));return n}(0,"sm"),n={show:!0,label:"Total",color:t.palette.text.secondary,fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight,lineHeight:t.typography.subtitle2.lineHeight},a={offsetY:8,color:t.palette.text.primary,fontSize:t.typography.h3.fontSize,fontWeight:t.typography.h3.fontWeight,lineHeight:t.typography.h3.lineHeight},c={colors:[t.palette.primary.main,t.palette.warning.main,t.palette.info.main,t.palette.error.main,t.palette.success.main,t.palette.warning.dark,t.palette.success.darker,t.palette.info.dark,t.palette.info.darker],chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:t.palette.text.disabled,fontFamily:t.typography.fontFamily},states:{hover:{filter:{type:"lighten",value:.04}},active:{filter:{type:"darken",value:.88}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:t.palette.divider,xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{},markers:{size:0,strokeColors:t.palette.background.paper},tooltip:{theme:!1,x:{show:!0}},legend:{show:!0,fontSize:13,position:"top",horizontalAlign:"right",markers:{radius:12},fontWeight:500,itemMargin:{horizontal:8},labels:{colors:t.palette.text.primary}},plotOptions:{bar:{borderRadius:r?3:1,columnWidth:"28%",borderRadiusApplication:"end",borderRadiusWhenStacked:"last"},pie:{donut:{labels:{show:!0,value:a,total:n}}},radialBar:{track:{strokeWidth:"100%",background:(0,l.X4)(t.palette.grey[500],.16)},dataLabels:{value:a,total:n}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:t.palette.divider,connectorColors:t.palette.divider}},polarArea:{rings:{strokeColor:t.palette.divider},spokes:{connectorColors:t.palette.divider}}},responsive:[{breakpoint:t.breakpoints.values.sm,options:{plotOptions:{bar:{columnWidth:"40%"}}}},{breakpoint:t.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"32%"}}}}]};return i()(c,e)}},57987:(e,t,r)=>{r.d(t,{kB:()=>a});var n=r(61481);function a(e){const{code:t}=function(){const{currentLang:{numberFormat:{code:e,currency:t}}}=(0,n.j)();return{code:null!=e?e:"en-US",currency:null!=t?t:"USD"}}();if(!e)return"";const r=Number(e);return new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}},79537:(e,t,r)=>{r.r(t),r.d(t,{DoWarmup:()=>b});var n=r(67186);function a(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function i(e,t){return e.get(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,t))}let o;function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){var t=new WeakMap;class r extends n.Message{constructor(e){super(),a(this,t,[]),n.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(t,this)),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return n.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){n.Message.setField(this,1,e)}static fromObject(e){const t=new r({});return null!=e.targetUrl&&(t.targetUrl=e.targetUrl),t}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new n.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof n.BinaryReader?e:new n.BinaryReader(e),a=new r;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?a.targetUrl=t.readString():t.skipField();return a}serializeBinary(){return this.serialize()}static deserializeBinary(e){return r.deserialize(e)}}e.WarmupRequest=r;var o=new WeakMap;class l extends n.Message{constructor(e){super(),a(this,o,[]),n.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(o,this)),Array.isArray(e)}static fromObject(e){return new l({})}toObject(){return{}}serialize(e){const t=e||new n.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof n.BinaryReader?e:new n.BinaryReader(e),r=new l;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return l.deserialize(e)}}e.WarmupResponse=l;var s=new WeakMap;class c extends n.Message{constructor(e){super(),a(this,s,[]),n.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(s,this)),Array.isArray(e)||"object"!=typeof e||"targetUrl"in e&&null!=e.targetUrl&&(this.targetUrl=e.targetUrl)}get targetUrl(){return n.Message.getFieldWithDefault(this,1,"")}set targetUrl(e){n.Message.setField(this,1,e)}static fromObject(e){const t=new c({});return null!=e.targetUrl&&(t.targetUrl=e.targetUrl),t}toObject(){const e={};return null!=this.targetUrl&&(e.targetUrl=this.targetUrl),e}serialize(e){const t=e||new n.BinaryWriter;if(this.targetUrl.length&&t.writeString(1,this.targetUrl),!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof n.BinaryReader?e:new n.BinaryReader(e),r=new c;for(;t.nextField()&&!t.isEndGroup();)1===t.getFieldNumber()?r.targetUrl=t.readString():t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return c.deserialize(e)}}e.PurgeAllRequest=c;var u=new WeakMap;class p extends n.Message{constructor(e){super(),a(this,u,[]),n.Message.initialize(this,Array.isArray(e)?e:[],0,-1,[],i(u,this)),Array.isArray(e)}static fromObject(e){return new p({})}toObject(){return{}}serialize(e){const t=e||new n.BinaryWriter;if(!e)return t.getResultBuffer()}static deserialize(e){const t=e instanceof n.BinaryReader?e:new n.BinaryReader(e),r=new p;for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return r}serializeBinary(){return this.serialize()}static deserializeBinary(e){return p.deserialize(e)}}e.PurgeAllResponse=p}(o||(o={}));const c=3e5,u=3,p=[500,502,503],d=!1;class m extends Error{constructor(e){super(e),this.name="MissingPathVarError"}}const g=new m("path variable is missing");const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const{timeout:a=c,retryCount:i=u,retryableCodes:m=p,contentTypeJson:h=d}=t;let{newPath:f,missingVar:y}=function(e,t){let r=!1,n=e;for(const[e,r]of Object.entries(t))n=n.replace(e,r);return r=n.includes("{"),{newPath:n,missingVar:r}}(n+"/rlwarmupproxy/warmup",t.pathVars||{});if(y)return Promise.reject(g);const b=e.serializeBinary(),v=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":h?"application/json":"application/x-protobuf",Accept:h?"application/json":"application/x-protobuf"}},t.cache?{cache:t.cache}:{});return f=f+"?"+new URLSearchParams({get_params:btoa(String.fromCharCode.apply(null,Array.from(b)))}),async function e(t){try{const r=await fetch(f,v);if(!r.ok&&m.includes(r.status)&&0!==t)return e(t-1);if(h)try{return[await r.json(),r.status]}catch(e){return console.log("error in reading response body: ",e),[new o.WarmupResponse,r.status]}try{const e=await r.arrayBuffer(),t=new Uint8Array(e);return[o.WarmupResponse.deserialize(t),r.status]}catch(e){return console.error("error in reading response body",e),[new o.WarmupResponse,r.status]}}catch(e){return console.log("error getting data: ",e),[new o.WarmupResponse,0]}}(i)};var f=r(5319);const y=e=>(console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e);async function b(e){const t=y(e);if(new URL(t).host!==window.location.host){const e=new o.WarmupRequest;e.targetUrl=t;const[r,n]=await h(e,{},"",(0,f.HZ)());return n}const r=new URL(t);return r.searchParams.append("rl-warmup","1"),r.searchParams.append("rl-rand",String(Math.floor((new Date).getTime()/1e3))),r.searchParams.append("rl-only-after",String(Math.floor((new Date).getTime()/1e3))),(await fetch(r,{credentials:"omit"})).status}},55551:(e,t,r)=>{r.d(t,{w:()=>H});var n=r(14041),a=r(25873),i=r(57621),o=r(31717),l=r(83818),s=r(12400),c=r(9832),u=r(92991),p=r(32017),d=r(95663),m=r(18755),g=r(27020);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(null,arguments)}const f=(0,n.forwardRef)((function(e,t){return n.createElement(g.A,h({direction:"up",ref:t},e))}));function y(e){let{lighthouseJSONErrMessage:t}=e;const[r,a]=(0,n.useState)(!0),i=()=>{a(!1)};return n.createElement(n.Fragment,null,n.createElement(c.A,{open:r,TransitionComponent:f,keepMounted:!0,onClose:i,"aria-describedby":"alert-dialog-slide-description"},n.createElement(m.A,null,"Use Google's location service?"),n.createElement(p.A,null,n.createElement(d.A,{id:"alert-dialog-slide-description"},t)),n.createElement(u.A,null,n.createElement(s.A,{onClick:i},"Ok"))))}var b=r(68355),v=r(11652),w=r(70927);function A(e){let{value:t}=e;const r=(0,w.A)(),a=()=>t>=90?[r.palette.success.light,r.palette.success.main]:t>=50?[r.palette.warning.light,r.palette.warning.main]:[r.palette.error.light,r.palette.error.main],i=(0,b.u)({legend:{show:!1},fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:a()[0],opacity:1},{offset:100,color:a()[1],opacity:1}]}},plotOptions:{radialBar:{hollow:{size:"64%"},dataLabels:{name:{offsetY:-16},value:{offsetY:8},total:{label:"Score",formatter:()=>"".concat(t)}}}}});return n.createElement(v.A,{dir:"ltr",type:"radialBar",series:[t],options:i,height:230})}var x=r(63213),E=r(60589),R=r(80985),O=r(54167),S=r(83761);function k(e){let{progress:t}=e;return n.createElement(R.A,{spacing:1},n.createElement(R.A,{direction:"row",alignItems:"center"},n.createElement(O.A,{variant:"subtitle2",sx:{flexGrow:1}},t.title),n.createElement(O.A,{variant:"body2",sx:{color:"text.secondary"}},"Â (",function(e){if(!e)return"0%";const t=Number(e)/100;return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}).format(t)}(t.value),")")),n.createElement(S.A,{variant:"determinate",value:t.value,color:(t.value<=30?"info":t.value<=60&&"warning")||"primary"}))}var j=r(57987);function z(e){if(!e)return"";if(!e.includes("-"))return e;const t=e.split("-").join(" ");return t.charAt(0).toUpperCase()+t.slice(1)}function U(e){return e?parseFloat((0,j.kB)(100*e)):0}const P=e=>{var t,r,a;let{lighthouseJSON:i,title:o}=e;return i.error&&i.error.message?n.createElement(y,{lighthouseJSONErrMessage:i.error.message}):n.createElement(x.A,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},n.createElement(x.A,{sx:{width:"100%"}},n.createElement(E.A,{variant:"h6",sx:{mb:2,textAlign:"center"}},o),n.createElement(x.A,{sx:{display:"flex",flexDirection:"column",gap:2}},n.createElement(x.A,null,n.createElement(A,{value:U(null==i||null===(t=i.lighthouseResult)||void 0===t||null===(t=t.categories)||void 0===t||null===(t=t.performance)||void 0===t?void 0:t.score)})),Object.values(null!==(r=null==i||null===(a=i.lighthouseResult)||void 0===a?void 0:a.audits)&&void 0!==r?r:{}).sort(((e,t)=>e.title>t.title?1:-1)).map(((e,t)=>null===e.title||null===e.score?n.createElement(n.Fragment,{key:t}):n.createElement(x.A,{key:t,style:{width:"100%"}},n.createElement("div",null,n.createElement(k,{progress:{title:z(e.title),value:U(e.score)}}))))))))};var B=r(66215),F=r(1123),C=r(30457);const W=e=>{let{message:t}=e;const[r,a]=(0,n.useState)(!0);return n.createElement(x.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},n.createElement(B.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:r},n.createElement(F.Ay,{container:!0,direction:"column",alignItems:"center",spacing:2},n.createElement(F.Ay,{item:!0},n.createElement(C.A,{color:"inherit"})),n.createElement(F.Ay,{item:!0},n.createElement(E.A,{style:{textColor:"white"},color:"white"},t)))))};var M=r(8836),D=r(96809),L=r(5319);const I={FirstContentFulPaint:"first-contentful-paint",TimeToInteractive:"interactive",SpeedIndex:"speed-index",TotalBlockingTime:"total-blocking-time",LargestContentFulPaint:"largest-contentful-paint",CumulativeLayoutShift:"cumulative-layout-shift",LargestContentFulPaintEle:"largest-contentful-paint-element"},T=async(e,t,r,n,a)=>{try{const i=((e,t,r)=>{if(null==e||null==e.audits)return void console.log("no lighthouseResult");const n=new M.I.ScoreMetrics;var a;null!=e.categories&&null!=e.categories.performance&&(n.MainScore=null==e||null===(a=e.categories)||void 0===a||null===(a=a.performance)||void 0===a?void 0:a.score);const i=e.audits;for(const e in I)if(i[I[e]])if("LargestContentFulPaintEle"===e){const t=new M.I.LCPE;var o,l;null!=i[I[e]]&&null!=i[I[e]].details&&null!=i[I[e]].details.items&&null!=i[I[e]].details.items[0]&&null!=i[I[e]].details.items[0].items&&null!=i[I[e]].details.items[0].items[0]&&null!=i[I[e]].details.items[0].items[0].node&&(t.Selector=null===(o=i[I[e]].details.items[0].items[0].node)||void 0===o?void 0:o.selector,t.Snippet=null===(l=i[I[e]].details.items[0].items[0].node)||void 0===l?void 0:l.snippet),n[e]=t}else{const t=new M.I.Score;t.numericUnit=i[I[e]].numericUnit,t.numericValue=i[I[e]].setNumericvalue,t.scale=i[I[e]].score,n[e]=t}const s=new M.I.ScoreStrategy;s.device=t||M.I.ScoreDevice.Desktop,s.version=r;const c=new M.I.SaveScoreRequest;return c.metrics=n,c.strategy=s,c})(e,n,a),o=((e,t)=>({pathVars:{"{domain_id}":e,"{url_id}":t}}))(t,r),l=(0,L.w9)(!1),s=(0,L.N4)(),[c,u]=await(0,D.ir)(i,o,l,s);200===u||console.error("Failed to save score. Status code:",u,"Error:",c)}catch(e){console.error("An error occurred while saving the score:",e)}};var N=r(69608),_=r(79537);const V=e=>{let{url:t,domain_id:r,url_id:a,device:i}=e;const[o,l]=(0,n.useState)("Warming up ...."),[s,c]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),d=async e=>{e.indexOf("wpunittest");const t=new URL("https://www.googleapis.com/pagespeedonline/v5/runPagespeed");t.searchParams.append("url",e),i&&(i===M.I.ScoreDevice.Mobile?t.searchParams.append("strategy","mobile"):t.searchParams.append("strategy","desktop"));const r=await fetch(t);return await r.json()};return(0,n.useEffect)((()=>{if(!t)return;const e=function(e){return console.debug("repairURL before:",e),e.startsWith("http")||(e="https://"+e),console.debug("repairURL after:",e),e}(t);l("Warming up ...."),(0,_.DoWarmup)(e).then((()=>{l("Analyzing with lighthouse ...."),d(e).then((e=>{c(e),e&&e.lighthouseResult&&T(null==e?void 0:e.lighthouseResult,r,a,i,M.I.ScoreVersion.Optimized)}));const t=new URL(e);t.searchParams.append("norl","1"),d(t.toString()).then((e=>{p(e),e&&e.lighthouseResult&&T(null==e?void 0:e.lighthouseResult,r,a,i,M.I.ScoreVersion.Original)}))}))}),[t]),React.createElement(React.Fragment,null,u&&s?React.createElement(React.Fragment,null,React.createElement(x.A,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"space-evenly",columnGap:3}},React.createElement(P,{lighthouseJSON:u,title:"Without RabbitLoader"}),React.createElement(N.A,{orientation:"vertical",flexItem:!0}),React.createElement(P,{lighthouseJSON:s,title:"With RabbitLoader"}))):React.createElement(React.Fragment,null,React.createElement(W,{message:o})))},G=function(e){let{url:t,domain_id:r,url_id:n,device:a}=e;return React.createElement(l.Z6,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},React.createElement(o.A,null,React.createElement(E.A,{sx:{mt:-1,mb:2,color:"black"}},t),React.createElement("div",{className:"App",style:{display:"contents",width:"100%"}},React.createElement(V,{url:t,domain_id:r,url_id:n,device:a}),React.createElement(i.N9,null))))},H=e=>{let{id:t,url:r,domain_id:i,url_id:o,device:l}=e;if("local-testing-root"!==t)return n.createElement(G,{url:r,domain_id:i,url_id:o,device:l});a.createRoot(document.getElementById(t)).render(n.createElement(n.StrictMode,null,n.createElement(G,{url:r,domain_id:i,url_id:o,device:l})))}}}]);